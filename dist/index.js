function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=e(t),o=e(require("lodash")),r=require("react-chat-engine"),a=e(require("axios")),l=require("nextjs-websocket"),i=require("@ant-design/icons"),s=require("react-spring"),c=require("react-grid-system"),d=e(require("react-html-parser")),u=require("react-scroll");function p(e){if(!e)return new Date;var t=new Date(e);return isNaN(t.getFullYear())&&(t=new Date(e.replace(" ","T"))),t}function f(e){var t=e.toLocaleString("en-US");return t.split(" ")[1].slice(0,-3)+" "+t.slice(-2)}function m(e){return e.toLocaleString("en-US")}var h=t.createContext(),g=function(e){var o=t.useState(!0),r=o[0],a=o[1],l=t.useState(null),i=l[0],s=l[1],c=t.useState(null),d=c[0],u=c[1],p=t.useState(""),g=p[0],q=p[1],v=t.useState(null),b=v[0],x=v[1],y=t.useState({}),w=y[0],C=y[1],E=t.useState(null),k=E[0],S=E[1],N=t.useState({}),M=N[0],_=N[1],O=t.useState(!1),T=O[0],I=O[1],D=t.useState(!1);return n.createElement(h.Provider,{value:{connecting:r,setConnecting:a,conn:i,setConn:s,creds:d,setCreds:u,sessionToken:g,setSessionToken:q,chats:b,setChats:x,messages:w,setMessages:C,activeChat:k,setActiveChat:S,typingCounter:M,setTypingCounter:_,loadMoreMessages:T,setLoadMoreMessages:I,isBottomVisible:D[0],setIsBottomVisible:D[1],userCallbacks:{translate:function(t,n,o){if(!e.translate)return o||t;var r=e.translate(t,n,o);return r||"string"==typeof r?r:o||t},formatDateTime:function(t,n){if(e.formatDateTime)return e.formatDateTime(t,n);switch(n){case"date":return m(t);case"time":return f(t);case"datetime":return function(e){return f(e)+", "+m(e)}(t);case"ago":return function(e){return e.toString().substr(4,6)}(t);default:return""}},openAttachment:function(t,n){e.openAttachment?e.openAttachment(t,n):window.open(t.file)},htmlMessageTransform:"function"==typeof e.htmlMessageTransform?e.htmlMessageTransform:null,onMessageSent:"function"==typeof e.onMessageSent?e.onMessageSent:null}}},e.children)};function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function v(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,function(e,t){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function b(e){return e&&e.development?"http://127.0.0.1:8000":"https://api.chatengine.io"}function x(e){return e?e.chatID?{"public-key":e.publicKey?e.publicKey:e.projectID,"chat-id":e.chatID,"access-key":e.chatAccessKey}:{"Public-Key":e.publicKey?e.publicKey:e.projectID,"User-Name":e.userName,"User-Secret":e.userPassword?e.userPassword:e.userSecret}:void 0}var y=function(e){var o=t.useRef(!1),l=t.useContext(r.ChatEngineContext),i=l.setConn,s=l.setCreds,c=l.setSessionToken,d=l.setChats,u=l.setActiveChat,f=l.setMessages;return t.useEffect(function(){o.current||(o.current=!0,function t(){!function(e,t,n){a.get(b(e)+"/users/me/session/",{headers:x(e)}).then(function(e){t&&t(e.data)}).catch(function(e){console.log("Get or Create Session Error",e),n&&n(e)})}(e,function(t){i(e),s(e),c(t.token)},function(n){n.response&&403===n.response.status&&(console.log("Your login credentials were not correct: \n\n                        Project ID: "+e.projectID+" \n\n                        Username: "+e.userName+" \n\n                        User Secret: "+e.userSecret+"\n\n                        Double check these credentials to make sure they're correct.\n\n                        If all three are correct, try resetting the username and secret in the Online Dashboard or Private API."),i(void 0),s(void 0),e.onFailAuth&&e.onFailAuth(e)),setTimeout(function(){return t()},3e3)})}(),r.getLatestChats(e,25,function(t){return function(t){var n=function(e){return Object.values(e).sort(function(e,t){var n=p(e.last_message.created?e.last_message.created:e.created);return p(t.last_message.created?t.last_message.created:t.created).getTime()-n.getTime()})}(t),o=n[0]?parseInt(n[0].id):0;d(_.mapKeys(t,"id")),u(o),r.getLatestMessages(e,o,45,function(e,t){f(_.mapKeys(t,"created"))})}(t)}))}),n.createElement("div",null)},w=void 0,C=0,E=0,k=Date.now()+1e4,S=function(e){var o=t.useState(Date.now()),a=o[0],i=o[1],s=t.useState(Date.now()+15e3),c=s[0],d=s[1],u=t.useContext(r.ChatEngineContext),f=u.connecting,m=u.setConnecting,h=u.conn,g=u.sessionToken,v=u.chats,b=u.setChats,x=u.messages,y=u.setMessages,S=u.activeChat,N=u.setActiveChat,M=u.typingCounter,O=u.setTypingCounter,T=u.isBottomVisible;function I(t){if(v){var n=q({},v);n[t.id]=t,b(n)}e.onEditChat&&e.onEditChat(t)}t.useEffect(function(){a>c&&(console.log("pingIntervalID",C),console.log("timeIntervalID",E),console.log("shouldPongBy",c),console.log("now",a),m(!0),e.reRender&&e.reRender(),d(Date.now()+15e3))},[a,c]),t.useEffect(function(){return function(){clearInterval(C),clearInterval(E)}},[]);var D=e.development;return g&&""!==g?n.createElement(l.WebSocket,{url:(D?"ws://":"wss://")+(D?"127.0.0.1:8000":"api.chatengine.io")+"/person_v4/?session_token="+g,reconnect:!0,reconnectIntervalInMilliSeconds:3e3,childRef:function(e){return w=e},onOpen:function(t){console.log("connected"),m(!1),f&&(C=setInterval(function(){try{w.sendMessage(JSON.stringify("ping"))}catch(e){console.log("Socker error",e)}},4e3),E=setInterval(function(){return i(Date.now())},1e3)),r.getLatestChats(t,25,function(e){return b(_.mapKeys(e,"id"))}),(Date.now()>k||t.renderChatFeed)&&r.getLatestMessages(t,S,45,function(e,t){y(q({},x,_.mapKeys(t,"created")))}),e.onConnect&&e.onConnect(t)}.bind(void 0,e),onError:function(e){return console.log("Socket Error",e)},onMessage:function(t){try{var n=JSON.parse(t);if("pong"===n.action)d(Date.now()+15e3);else if("new_chat"===n.action){var o=n.data;if(v){var a=q({},v);a[o.id]=o,b(a),N(o.id)}e.onNewChat&&e.onNewChat(n.data)}else if("edit_chat"===n.action)I(n.data);else if("delete_chat"===n.action){var l=n.data;if(v&&(v[l.id]=void 0,b(v),!_.isEmpty(v))){var i=function(e){return Object.values(e).sort(function(e,t){var n=p(e.last_message.created?e.last_message.created:e.created);return p(t.last_message.created?t.last_message.created:t.created).getTime()-n.getTime()})}(v);N(i[0]?parseInt(i[0].id):0)}e.onDeleteChat&&e.onDeleteChat(l)}else if("add_person"===n.action)I(n.data),e.onAddPerson&&e.onAddPerson(n.data);else if("remove_person"===n.action)I(n.data),e.onRemovePerson&&e.onRemovePerson(n.data);else if("new_message"===n.action){var s=n.data,c=s.id,u=s.message;if(parseInt(c)===parseInt(S)){var f=q({},x);f[u.created]=u,y(f)}u.sender_username!==e.userName&&T&&r.readMessage(h,S,u.id,function(e){return I(e)}),e.onNewMessage&&e.onNewMessage(c,u)}else if("edit_message"===n.action){var m=n.data,g=m.id,w=m.message;g===S&&(x[w.created]=w,y(x)),e.onEditMessage&&e.onEditMessage(g,w)}else if("delete_message"===n.action){var C=n.data,E=C.id,k=C.message;E===S&&(x[k.created]=void 0,y(x)),e.onDeleteMessage&&e.onDeleteMessage(E,k)}else if("is_typing"===n.action){var D,z,R=n.data,A=R.id,F=R.person,j=q({},M);j=q({},j,((z={})[A]=q({},j[A],((D={})[F]=Date.now(),D)),z)),O(j),e.onTyping&&e.onTyping(A,F)}return Promise.resolve()}catch(e){return Promise.reject(e)}}.bind(void 0),onClose:function(){console.log("Socket Closed"),m(!0),e.reRender&&e.reRender()}}):n.createElement("div",null)},N=function(e){var o=t.useState(!1),r=o[0],a=o[1];return n.createElement("div",null,!r&&n.createElement(y,e),!r&&n.createElement(S,q({},e,{reRender:function(){return a(!0),void setTimeout(function(){return a(!1)},100)}})))},M=void 0,O=0,T=0,I=Date.now()+1e4,D=function(e){var a=t.useState(Date.now()),i=a[0],s=a[1],c=t.useState(Date.now()+15e3),d=c[0],u=c[1],p=t.useContext(r.ChatEngineContext),f=p.connecting,m=p.setConnecting,h=p.conn,g=p.setConn,v=p.setCreds,b=p.chats,x=p.setChats,y=p.messages,w=p.setMessages,C=p.activeChat,E=p.setActiveChat,k=p.typingCounter,S=p.setTypingCounter;function N(t){if(b){var n=q({},b);n[t.id]=t,x(n)}e.onEditChat&&e.onEditChat(t)}t.useEffect(function(){i>d&&(console.log("shouldPongBy",d),console.log("now",i),m(!0),e.reRender&&e.reRender(),u(Date.now()+15e3))},[i,d]),t.useEffect(function(){return function(){clearInterval(O),clearInterval(T)}},[]);var _=e.development;return n.createElement(l.WebSocket,{reconnect:!0,childRef:function(e){return M=e},url:(_?"ws://":"wss://")+(_?"127.0.0.1:8000":"api.chatengine.io")+"/chat/?projectID="+(e.publicKey||e.projectID)+"&chatID="+e.chatID+"&accessKey="+e.chatAccessKey,onOpen:function(t){g(t),v(t),m(!1),f&&(O=setInterval(function(){try{M.sendMessage(JSON.stringify("ping"))}catch(e){console.log("Socker error",e)}},4e3),T=setInterval(function(){return s(Date.now())},1e3)),r.getChat(t,e.chatID,function(e){return function(e){null===C&&E(e.id),x(o.mapKeys([e],"id"))}(e)}),Date.now()>I&&r.getLatestMessages(t,e.chatID,45,function(e,t){w(q({},y,o.mapKeys(t,"created")))}),e.onConnect&&e.onConnect(t)}.bind(void 0,e),onClose:function(){m(!0),e.reRender&&e.reRender()}.bind(void 0),onError:function(e){return console.log("Socket Error",e)},onMessage:function(t){var n=JSON.parse(t);if("pong"===n.action)u(Date.now()+15e3);else if("login_error"===n.action)console.log("Your chat auth credentials were not correct: \n\n                Project ID: "+e.projectID+" \n\n                Chat ID: "+e.chatID+" \n\n                Access Key: "+e.chatAccessKey+"\n\n                Double check these credentials to make sure they're correct.\n\n                If all three are correct, try resetting the username and secret in the Online Dashboard or Private API."),g(void 0),v(void 0),e.onFailAuth&&e.onFailAuth(h);else if("edit_chat"===n.action)N(n.data);else if("delete_chat"===n.action){var o=n.data;b&&(b[o.id]=void 0,x(b)),e.onDeleteChat&&e.onDeleteChat(o)}else if("add_person"===n.action)N(n.data),e.onAddPerson&&e.onAddPerson(n.data);else if("remove_person"===n.action)N(n.data),e.onRemovePerson&&e.onRemovePerson(n.data);else if("new_message"===n.action){var r=n.data,a=r.id,l=r.message;if(a===C){var i=q({},y);i[l.created]=l,w(i)}e.onNewMessage&&e.onNewMessage(a,l)}else if("edit_message"===n.action){var s=n.data,c=s.id,d=s.message;c===C&&(y[d.created]=d,w(y)),e.onEditMessage&&e.onEditMessage(c,d)}else if("delete_message"===n.action){var p=n.data,f=p.id,m=p.message;f===C&&(y[m.created]=void 0,w(y)),e.onDeleteMessage&&e.onDeleteMessage(f,m)}else if("is_typing"===n.action){var E,M,_=n.data,O=_.id,T=_.person,I=q({},k);I=q({},I,((M={})[O]=q({},I[O],((E={})[T]=Date.now(),E)),M)),S(I),e.onTyping&&e.onTyping(O,T)}}.bind(void 0),reconnectIntervalInMilliSeconds:3e3})},z=function(e){var o=t.useRef();return function(n){var o=t.useState(!1)[1],r=new IntersectionObserver(function(t){var n=t[0];o(n.isIntersecting),n.isIntersecting&&e.onVisible()});t.useEffect(function(){return r.observe(n.current),function(){r.disconnect()}},[])}(o),n.createElement("div",{ref:o},n.createElement("div",{style:{textAlign:"center",backgroundColor:"#e2e2e2",margin:"4px",borderRadius:"4px"}},n.createElement(i.LoadingOutlined,{style:{fontSize:"21px",padding:"24px"}})))},R=function(e){var o=t.useContext(h),a=o.conn,l=o.userCallbacks.translate,s=t.useState(""),c=s[0],d=s[1],u=t.useState(!1),p=u[0],f=u[1];return n.createElement("div",null,e.onClose&&n.createElement("div",{style:{height:"0px"}},n.createElement(i.CloseOutlined,{style:A.closeIcon,onClick:function(){return e.onClose()}})),n.createElement("div",{className:"ce-chat-form-container",style:q({},A.newChatContainer,{marginLeft:e.onClose?"40px":"0px"})},p?n.createElement("form",{onSubmit:function(e){e.preventDefault(),a&&c.trim().length>0&&r.newChat(a,{title:c},function(){return f(!1)}),d("")}.bind(void 0)},n.createElement(r.TextInput,{autoFocus:!0,label:l("Chat Title","NewChatForm"),value:c,id:"ce-new-chat-title-field",onBlur:function(){return f(!1)},style:{width:"100%"},handleChange:function(e){d(e.target.value)}})):n.createElement("div",null,n.createElement("div",{style:{height:"0px"}},n.createElement("div",{style:{fontWeight:"600",fontSize:"24px",position:"relative",top:"4px",width:"calc(100% - 48px)"}},l("My Chats","NewChatForm"))),n.createElement("div",{style:{width:"100%",textAlign:"right"}},n.createElement(r.Button,{icon:"plus",id:"new-chat-plus-button",onClick:function(){return f(!0)}})))))},A={closeIcon:{position:"relative",top:"26px",left:"18px",fontSize:"16px"},newChatContainer:{padding:"16px 14px",backgroundColor:"white"}},F=function(){return n.createElement("div",{style:j.chatContainer,className:"ce-chat-card ce-chat-card-loading"},n.createElement("div",{style:q({},j.titleText,{animation:"spin 2s linear infinite"}),className:"ce-chat-title-text",id:"ce-chat-card-title-loading"},n.createElement("div",{className:"ce-chat-card-loading-bar",style:q({},j.loadingBar,{marginBottom:"8px",height:"16px",width:"100%"})})),n.createElement("div",{style:{width:"100%"},className:"ce-chat-subtitle"},n.createElement("div",{style:j.messageText,className:"ce-chat-subtitle-text ce-chat-subtitle-message"},n.createElement("div",{className:"ce-chat-card-loading-bar",style:q({},j.loadingBar,{width:"45%"})})),n.createElement("div",{className:"ce-chat-card-loading-bar",style:q({},j.loadingBar,{float:"right",marginTop:"6px",width:"20%"})})))},j={chatContainer:{padding:"16px",paddingBottom:"12px",cursor:"pointer"},titleText:{fontWeight:"500",paddingBottom:"4px",whiteSpace:"nowrap",overflow:"hidden"},messageText:{width:"75%",color:"rgba(153, 153, 153, 1)",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",display:"inline-block"},loadingBar:{borderRadius:"4px",backgroundColor:"#e2e2e2",height:"12px",display:"inline-block"}},P=["children","triggers"],L=function(e){var t=e.children,o=e.triggers,r=void 0===o?[]:o,a=function(e){var t=e.x,o=void 0===t?0:t,r=e.y,a=void 0===r?0:r,l=e.rotation,i=void 0===l?0:l,c=e.scale,d=void 0===c?1:c,u=e.timing,p=void 0===u?150:u,f=e.springConfig,m=void 0===f?{tension:300,friction:10}:f,h=e.width,g=void 0===h?"auto":h,q=n.useState(!1),v=q[0],b=q[1],x=s.useSpring({display:"inline-block",backfaceVisibility:"hidden",transform:v?"translate("+o+"px, "+a+"px)\n            rotate("+i+"deg)\n            scale("+d+")":"translate(0px, 0px)\n            rotate(0deg)\n            scale(1)",config:m,width:g});return n.useEffect(function(){if(v){var e=window.setTimeout(function(){b(!1)},p);return function(){window.clearTimeout(e)}}},[v]),[x,n.useCallback(function(){b(!0)},[])]}(function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t.indexOf(n=a[o])>=0||(r[n]=e[n]);return r}(e,P)),l=a[1];function i(e){return-1!==r.indexOf(e)}return n.createElement(s.animated.span,{style:a[0],onClick:function(){return i("onClick")&&l()},onMouseEnter:function(){return i("onMouseEnter")&&l()},onMouseLeave:function(){return i("onMouseLeave")&&l()}},t)},B=require("html-to-text").htmlToText,H=function(e){var a=e.chat,l=t.useContext(r.ChatEngineContext),i=l.conn,s=l.activeChat,c=l.setActiveChat,d=l.userCallbacks,u=d.formatDateTime,f=d.translate;if(o.isEmpty(a)||e.loading)return n.createElement(F,null);if(!i||null===i)return n.createElement("div",null);var m,h=s===a.id?$.activeChat:{},g=a.people.find(function(e){return i.userName!==e.person.username}),v=a.is_direct_chat&&g?g.person.username:a.title,b=B(a.last_message.text,{});function x(e){var t=!0;return e.people.map(function(n){i.userName===n.person.username&&(t=e.last_message.id===n.last_read)}),t}return b||(b=a.last_message.attachments.length>0?a.last_message.attachments.length+" image"+(a.last_message.attachments.length>1?"s":""):f("Say hello!","ChatCard")),n.createElement(L,{triggers:["onClick","onMouseEnter"],x:3,timing:60,width:"100%"},n.createElement("div",{onClick:function(){return c(a.id)},style:q({},$.chatContainer,h),className:"ce-chat-card "+(s===a.id&&"ce-active-chat-card")},n.createElement("div",{style:$.titleText,className:"ce-chat-title-text",id:"ce-chat-card-title-"+v},n.createElement("div",{style:{width:!x(a)&&"calc(100% - 18px)",overflowX:"hidden",display:"inline-block"}},v),!x(a)&&n.createElement("div",{className:"ce-chat-unread-dot",style:{marginTop:"5px",width:"12px",height:"12px",borderRadius:"6px",backgroundColor:"#1890ff",float:"right",display:"inline-block"}})),n.createElement("div",{style:{width:"100%"},className:"ce-chat-subtitle"},n.createElement("div",{style:$.messageText,className:"ce-chat-subtitle-text ce-chat-subtitle-message"},b),n.createElement("div",{className:"ce-chat-subtitle-text ce-chat-subtitle-date",style:q({},$.messageText,{textAlign:"right",width:"25%"})},(m=a.last_message.created)?u(p(m),"ago"):""))))},$={chatContainer:{padding:"16px",paddingBottom:"12px",cursor:"pointer"},titleText:{fontWeight:"500",paddingBottom:"4px",whiteSpace:"nowrap",overflow:"hidden"},messageText:{width:"75%",color:"rgba(153, 153, 153, 1)",fontSize:"14px",whiteSpace:"nowrap",overflow:"hidden",display:"inline-block"},activeChat:{backgroundColor:"#d9d9d9",border:"0px solid white",borderRadius:"12px"}},W=function(e){var a=t.useRef(!1),l=t.useState(!1),i=l[0],s=l[1],c=t.useState(!0),d=c[0],u=c[1],f=t.useContext(r.ChatEngineContext),m=f.conn,h=f.chats,g=f.setChats,v=f.setActiveChat,b=x(h?Object.values(h):[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]);function x(e){return e.sort(function(e,t){var n=p(e.last_message&&e.last_message.created?e.last_message.created:e.created),o=p(t.last_message&&t.last_message.created?t.last_message.created:t.created);return new Date(o)-new Date(n)})}function y(e){s(!1);var t=null!==h?h:{},n=o.mapKeys(q({},e),"id"),r=q({},t,n);g(r),33>e.length&&u(!1)}return t.useEffect(function(){a.current||(a.current=!0,r.getLatestChats(e,33,function(e){y(e),e.length>0&&v(e[0].id)}))}),t.useEffect(function(){if(i&&"loading"!==i){s("loading");var t=(null!==h?x(Object.values(h)):[]).filter(function(e){return e});t.length>0&&r.getChatsBefore(e,t[t.length-1].created,33,function(e){return y(e)})}},[i]),n.createElement("div",{style:V.chatListContainer,className:"ce-chat-list"},n.createElement("div",{style:V.chatsContainer,className:"ce-chats-container"},e.renderNewChatForm?e.renderNewChatForm(m):n.createElement(R,{onClose:e.onClose?function(){return e.onClose()}:void 0}),function(t){return t.map(function(t,o){return t?e.renderChatCard?n.createElement("div",{key:"chat_"+o},e.renderChatCard(t,o)):n.createElement("div",{key:"chat_"+o,onClick:function(){return e.onChatClick&&e.onChatClick(t.id)}},n.createElement(H,{chat:t})):n.createElement("div",{key:"chat_"+o})})}(b),d&&b.length>0&&n.createElement("div",null,n.createElement(z,{onVisible:function(){return!i&&s(!0)}}),n.createElement("div",{style:{height:"8px"}}))))},V={chatListContainer:{height:"100%",maxHeight:"100vh",overflow:"scroll",overflowX:"hidden",borderRight:"1px solid #afafaf",backgroundColor:"white"},chatsContainer:{width:"100%",height:"100%",backgroundColor:"white",borderRadius:"0px 0px 24px 24px"}},K=function(e){var o=t.useContext(r.ChatEngineContext);return n.createElement("div",{id:"ce-login-fail-breaker",style:{width:"100%",textAlign:"center",paddingTop:"calc(50% - 112px)"}},n.createElement("div",{id:"ce-login-fail-text",style:{color:"#afafaf",fontWeight:"600",fontSize:"14px",marginBottom:"6px",marginRight:"32px",marginLeft:"32px"}},(0,o.userCallbacks.translate)("Your credentials are incorrect. Make sure your Project ID, Username, and Password are correct here","AuthFail")),n.createElement("img",{id:"ce-login-fail-gif",style:{width:"50%",maxWidth:"200px"},src:"https://chat-engine-assets.s3.amazonaws.com/welcome_gifs/no.gif",alt:"chat-engine-login-fail"}))};function U(e,t,n){a.post(b(e)+"/chats/",t,{headers:x(e)}).then(function(e){n&&n(e.data)}).catch(function(e){console.log("New Chat Error",e)})}function G(e,t){return e(t={exports:{}},t.exports),t.exports
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */}var J="function"==typeof Symbol&&Symbol.for,Y=J?Symbol.for("react.element"):60103,X=J?Symbol.for("react.portal"):60106,Z=J?Symbol.for("react.fragment"):60107,Q=J?Symbol.for("react.strict_mode"):60108,ee=J?Symbol.for("react.profiler"):60114,te=J?Symbol.for("react.provider"):60109,ne=J?Symbol.for("react.context"):60110,oe=J?Symbol.for("react.async_mode"):60111,re=J?Symbol.for("react.concurrent_mode"):60111,ae=J?Symbol.for("react.forward_ref"):60112,le=J?Symbol.for("react.suspense"):60113,ie=J?Symbol.for("react.suspense_list"):60120,se=J?Symbol.for("react.memo"):60115,ce=J?Symbol.for("react.lazy"):60116,de=J?Symbol.for("react.block"):60121,ue=J?Symbol.for("react.fundamental"):60117,pe=J?Symbol.for("react.responder"):60118,fe=J?Symbol.for("react.scope"):60119;function me(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Y:switch(e=e.type){case oe:case re:case Z:case ee:case Q:case le:return e;default:switch(e=e&&e.$$typeof){case ne:case ae:case ce:case se:case te:return e;default:return t}}case X:return t}}}function he(e){return me(e)===re}var ge={AsyncMode:oe,ConcurrentMode:re,ContextConsumer:ne,ContextProvider:te,Element:Y,ForwardRef:ae,Fragment:Z,Lazy:ce,Memo:se,Portal:X,Profiler:ee,StrictMode:Q,Suspense:le,isAsyncMode:function(e){return he(e)||me(e)===oe},isConcurrentMode:he,isContextConsumer:function(e){return me(e)===ne},isContextProvider:function(e){return me(e)===te},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Y},isForwardRef:function(e){return me(e)===ae},isFragment:function(e){return me(e)===Z},isLazy:function(e){return me(e)===ce},isMemo:function(e){return me(e)===se},isPortal:function(e){return me(e)===X},isProfiler:function(e){return me(e)===ee},isStrictMode:function(e){return me(e)===Q},isSuspense:function(e){return me(e)===le},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===Z||e===re||e===ee||e===Q||e===le||e===ie||"object"==typeof e&&null!==e&&(e.$$typeof===ce||e.$$typeof===se||e.$$typeof===te||e.$$typeof===ne||e.$$typeof===ae||e.$$typeof===ue||e.$$typeof===pe||e.$$typeof===fe||e.$$typeof===de)},typeOf:me},qe=G(function(e,t){"production"!==process.env.NODE_ENV&&function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,o=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,l=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,q=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var f=e.type;switch(f){case c:case d:case r:case l:case a:case p:return f;default:var g=f&&f.$$typeof;switch(g){case s:case u:case h:case m:case i:return g;default:return t}}case o:return t}}}var y=d,w=s,C=i,E=n,k=u,S=r,N=h,M=m,_=o,O=l,T=a,I=p,D=!1;function z(e){return x(e)===d}t.AsyncMode=c,t.ConcurrentMode=y,t.ContextConsumer=w,t.ContextProvider=C,t.Element=E,t.ForwardRef=k,t.Fragment=S,t.Lazy=N,t.Memo=M,t.Portal=_,t.Profiler=O,t.StrictMode=T,t.Suspense=I,t.isAsyncMode=function(e){return D||(D=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),z(e)||x(e)===c},t.isConcurrentMode=z,t.isContextConsumer=function(e){return x(e)===s},t.isContextProvider=function(e){return x(e)===i},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return x(e)===u},t.isFragment=function(e){return x(e)===r},t.isLazy=function(e){return x(e)===h},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===o},t.isProfiler=function(e){return x(e)===l},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===d||e===l||e===a||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===m||e.$$typeof===i||e.$$typeof===s||e.$$typeof===u||e.$$typeof===q||e.$$typeof===v||e.$$typeof===b||e.$$typeof===g)},t.typeOf=x}()}),ve=G(function(e){e.exports="production"===process.env.NODE_ENV?ge:qe}),be=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;function we(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Ce=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,r=we(e),a=1;a<arguments.length;a++){for(var l in n=Object(arguments[a]))xe.call(n,l)&&(r[l]=n[l]);if(be){o=be(n);for(var i=0;i<o.length;i++)ye.call(n,o[i])&&(r[o[i]]=n[o[i]])}}return r},Ee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ke=Function.call.bind(Object.prototype.hasOwnProperty),Se=function(){};if("production"!==process.env.NODE_ENV){var Ne=Ee,Me={},_e=ke;Se=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function Oe(e,t,n,o,r){if("production"!==process.env.NODE_ENV)for(var a in e)if(_e(e,a)){var l;try{if("function"!=typeof e[a]){var i=Error((o||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw i.name="Invariant Violation",i}l=e[a](t,a,o,n,null,Ne)}catch(e){l=e}if(!l||l instanceof Error||Se((o||"React class")+": type specification of "+n+" `"+a+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in Me)){Me[l.message]=!0;var s=r?r():"";Se("Failed "+n+" type: "+l.message+(null!=s?s:""))}}}Oe.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(Me={})};var Te=Oe,Ie=function(){};function De(){return null}function ze(){}function Re(){}"production"!==process.env.NODE_ENV&&(Ie=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}),Re.resetWarningCache=ze;var Ae=G(function(e){e.exports="production"!==process.env.NODE_ENV?function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,o={array:i("array"),bigint:i("bigint"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),symbol:i("symbol"),any:l(De),arrayOf:function(e){return l(function(t,n,o,r,l){if("function"!=typeof e)return new a("Property `"+l+"` of component `"+o+"` has invalid PropType notation inside arrayOf.");var i=t[n];if(!Array.isArray(i))return new a("Invalid "+r+" `"+l+"` of type `"+d(i)+"` supplied to `"+o+"`, expected an array.");for(var s=0;s<i.length;s++){var c=e(i,s,o,r,l+"["+s+"]",Ee);if(c instanceof Error)return c}return null})},element:l(function(t,n,o,r,l){var i=t[n];return e(i)?null:new a("Invalid "+r+" `"+l+"` of type `"+d(i)+"` supplied to `"+o+"`, expected a single ReactElement.")}),elementType:l(function(e,t,n,o,r){var l=e[t];return ve.isValidElementType(l)?null:new a("Invalid "+o+" `"+r+"` of type `"+d(l)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(e){return l(function(t,n,o,r,l){var i;return t[n]instanceof e?null:new a("Invalid "+r+" `"+l+"` of type `"+((i=t[n]).constructor&&i.constructor.name?i.constructor.name:"<<anonymous>>")+"` supplied to `"+o+"`, expected instance of `"+(e.name||"<<anonymous>>")+"`.")})},node:l(function(e,t,n,o,r){return c(e[t])?null:new a("Invalid "+o+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return l(function(t,n,o,r,l){if("function"!=typeof e)return new a("Property `"+l+"` of component `"+o+"` has invalid PropType notation inside objectOf.");var i=t[n],s=d(i);if("object"!==s)return new a("Invalid "+r+" `"+l+"` of type `"+s+"` supplied to `"+o+"`, expected an object.");for(var c in i)if(ke(i,c)){var u=e(i,c,o,r,l+"."+c,Ee);if(u instanceof Error)return u}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Ie(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),De;function t(t,n,o,l,i){for(var s=t[n],c=0;c<e.length;c++)if(r(s,e[c]))return null;var d=JSON.stringify(e,function(e,t){return"symbol"===u(t)?String(t):t});return new a("Invalid "+l+" `"+i+"` of value `"+String(s)+"` supplied to `"+o+"`, expected one of "+d+".")}return l(t)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&Ie("Invalid argument supplied to oneOfType, expected an instance of array."),De;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return Ie("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(n)+" at index "+t+"."),De}return l(function(t,n,o,r,l){for(var i=[],s=0;s<e.length;s++){var c=(0,e[s])(t,n,o,r,l,Ee);if(null==c)return null;c.data&&ke(c.data,"expectedType")&&i.push(c.data.expectedType)}return new a("Invalid "+r+" `"+l+"` supplied to `"+o+"`"+(i.length>0?", expected one of type ["+i.join(", ")+"]":"")+".")})},shape:function(e){return l(function(t,n,o,r,l){var i=t[n],c=d(i);if("object"!==c)return new a("Invalid "+r+" `"+l+"` of type `"+c+"` supplied to `"+o+"`, expected `object`.");for(var p in e){var f=e[p];if("function"!=typeof f)return s(o,r,l,p,u(f));var m=f(i,p,o,r,l+"."+p,Ee);if(m)return m}return null})},exact:function(e){return l(function(t,n,o,r,l){var i=t[n],c=d(i);if("object"!==c)return new a("Invalid "+r+" `"+l+"` of type `"+c+"` supplied to `"+o+"`, expected `object`.");var p=Ce({},t[n],e);for(var f in p){var m=e[f];if(ke(e,f)&&"function"!=typeof m)return s(o,r,l,f,u(m));if(!m)return new a("Invalid "+r+" `"+l+"` key `"+f+"` supplied to `"+o+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=m(i,f,o,r,l+"."+f,Ee);if(h)return h}return null})}};function r(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function a(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function l(e){function t(t,n,o,r,l,i,s){if(r=r||"<<anonymous>>",i=i||o,s!==Ee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}return null==n[o]?t?new a(null===n[o]?"The "+l+" `"+i+"` is marked as required in `"+r+"`, but its value is `null`.":"The "+l+" `"+i+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:e(n,o,r,l,i)}process;var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){return l(function(t,n,o,r,l,i){var s=t[n];return d(s)!==e?new a("Invalid "+r+" `"+l+"` of type `"+u(s)+"` supplied to `"+o+"`, expected `"+e+"`.",{expectedType:e}):null})}function s(e,t,n,o,r){return new a((e||"React class")+": "+t+" type `"+n+"."+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+r+"`.")}function c(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(c);if(null===t||e(t))return!0;var o=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!o)return!1;var r,a=o.call(t);if(o!==t.entries){for(;!(r=a.next()).done;)if(!c(r.value))return!1}else for(;!(r=a.next()).done;){var l=r.value;if(l&&!c(l[1]))return!1}return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function u(e){if(null==e)return""+e;var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function p(e){var t=u(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return a.prototype=Error.prototype,o.checkPropTypes=Te,o.resetWarningCache=Te.resetWarningCache,o.PropTypes=o,o}(ve.isElement):function(){function e(e,t,n,o,r,a){if(a!==Ee){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Re,resetWarningCache:ze};return n.PropTypes=n,n}()}),Fe=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={focused:!1,value:null},t}v(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this.props.default;e&&(this.props.handleChange({target:{value:e}}),this.setState({value:e}))},o.render=function(){var e=this;return n.createElement("input",{id:this.props.id,autoFocus:this.props.autoFocus,className:"ce-input ce-text-input",value:this.props.value,placeholder:this.props.label,style:q({},this.state.focused?je.focusInput:je.input,this.props.style?this.props.style:{}),onBlur:function(){e.setState({focused:!1}),e.props.onBlur&&e.props.onBlur()},onFocus:function(){e.setState({focused:!0}),e.props.onFocus&&e.props.onFocus()},type:this.props.type?this.props.type:"text",onChange:function(t){return e.props.handleChange&&e.props.handleChange(t)}})},t}(t.Component),je={input:{height:"36px",fontSize:"15px",outline:"none",borderRadius:"24px",border:"1px solid #d9d9d9",padding:"0px 12px",boxSizing:"border-box"},focusInput:{height:"36px",fontSize:"15px",outline:"none",borderRadius:"24px",border:"1px solid #1890ff",padding:"0px 12px",boxSizing:"border-box"}};Fe.propTypes={default:Ae.string,value:Ae.string,label:Ae.string,type:Ae.oneOf(["text","password","number"]),autoFocus:Ae.bool,id:Ae.string,style:Ae.object,handleChange:Ae.func,onFocus:Ae.func,onBlur:Ae.func};var Pe,Le=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={focused:!1,showAll:!1},t}v(t,e);var o=t.prototype;return o.onFocus=function(){this.onChange("",!0),this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus()},o.onBlur=function(){this.setState({focused:!1}),this.props.onBlur&&this.props.onBlur()},o.onChange=function(e,t){this.setState({showAll:t}),this.props.handleChange&&this.props.handleChange(e)},o.getNames=function(){var e=this,t=0,n=this.props.max?this.props.max:3,o=[];return this.props.options.map(function(r){-1!==JSON.stringify(r).toLowerCase().indexOf(e.props.value.toLowerCase())&&(t<n||n<0)&&(t+=1,o.push(r))}),o},o.renderOptions=function(){var e=this;if(!this.props.value&&!this.state.showAll)return n.createElement("div",null);var t=this.getNames();return t.map(function(o,r){return n.createElement("div",{key:"option_"+r,className:"ce-autocomplete-option"},e.props.renderOption&&e.props.renderOption(o),r===t.length-1&&n.createElement("div",{style:Be.close,className:"ce-autocomplete-close",onClick:function(){return e.onChange("",!1)}},n.createElement(i.CloseOutlined,null)))})},o.render=function(){var e=this,t=this.props.options,o=this.props.style?this.props.style:{},r=q({},Be.input,{border:this.state.focused?"1px solid #1890ff":"1px solid #d9d9d9"});return n.createElement("div",null,n.createElement("input",{id:"ce-add-username-input",className:"ce-input ce-autocomplete-input",value:this.props.value,placeholder:this.props.label,style:q({},r,o),type:this.props.type?this.props.type:"text",onBlur:function(){return e.onBlur()},onFocus:function(){return e.onFocus()},onChange:function(t){return e.onChange(t.target.value,!0)}}),t&&t.length>0&&this.state.showAll&&n.createElement("div",{className:"ce-autocomplete-options",style:{borderRadius:"19px",border:"1px solid #afafaf",overflow:"hidden"}},this.props.options&&this.renderOptions()))},t}(t.Component),Be={input:{height:"36px",fontSize:"15px",outline:"none",borderRadius:"24px",padding:"0px 12px",boxSizing:"border-box"},close:{cursor:"pointer",textAlign:"center",padding:"8px 12px",fontSize:"15px",borderRadius:"24px"}};Le.propTypes={default:Ae.string,value:Ae.string,options:Ae.arrayOf(Ae.object),max:Ae.number,label:Ae.string,type:Ae.oneOf(["text","number"]),style:Ae.object,handleChange:Ae.func,onFocus:Ae.func,onBlur:Ae.func};var He=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={hovered:!1},t}return v(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.value,r=t.icon,a=t.theme,l=t.onClick;return n.createElement("button",{id:t.id,type:t.type,onClick:function(){return l&&l()},onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},style:q({},"danger"===a?$e.dangerButton:$e.button,t.style||{},this.state.hovered?$e.hoverButton:{}),className:"ce-primary-button "+("danger"===a?"ce-danger-button":"")},"plus"===r&&n.createElement(i.PlusOutlined,null),"delete"===r&&n.createElement(i.DeleteOutlined,null),"user-add"===r&&n.createElement(i.UserAddOutlined,null),o&&r?" "+o:o)},t}(t.Component),$e={button:{color:"white",border:"none",outline:"none",height:"36px",fontSize:"15px",cursor:"pointer",padding:"8px 16px",borderRadius:"33px",backgroundColor:"#1890ff"},dangerButton:(Pe={color:"red",border:"none",outline:"none",height:"36px",fontSize:"15px",cursor:"pointer",padding:"8px 16px",borderRadius:"33px",backgroundColor:"white"},Pe.border="1px solid red",Pe),hoverButton:{opacity:"0.66"}};He.propTypes={value:Ae.string,onClick:Ae.func,style:Ae.object,id:Ae.string,icon:Ae.oneOf([void 0,"plus","delete","user-add"]),theme:Ae.oneOf([void 0,"danger"]),type:Ae.oneOf([void 0,"submit"])};var We=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.translate,a=e.conn,l=t.useState(""),i=l[0],s=l[1];return n.createElement("div",{class:"ce-ice-breaker-no-chat"},n.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&U(a,{title:i})}},n.createElement("b",null,o("No chat room found, start by creating one","CreateChat")),n.createElement("br",null),n.createElement(Fe,{type:"text",label:o("Chat room name","CreateChat"),handleChange:function(e){s(e.target.value)}}),n.createElement(He,{type:"submit",value:o("Create","CreateChat")})))},Ve=function(){var e=t.useContext(r.ChatEngineContext);return n.createElement("div",{id:"ce-ice-breaker-chat",style:{width:"100%",textAlign:"center",paddingTop:"calc(43% - 112px)"}},n.createElement("div",{id:"ce-ice-breaker-text",style:{color:"#afafaf",fontWeight:"600",fontSize:"14px",marginBottom:"6px"}},(0,e.userCallbacks.translate)("No messages here yet...","IceBreaker")))},Ke=function(e){t.useContext(h);var o=t.useRef();return function(n){var o=t.useState(!1)[1],r=new IntersectionObserver(function(t){var n=t[0];o(n.isIntersecting),n.isIntersecting?e.onEnter&&e.onEnter():e.onLeave&&e.onLeave()});t.useEffect(function(){return r.observe(n.current),function(){r.disconnect()}},[])}(o),n.createElement("div",{ref:o,id:e.id},e.children)},Ue=function(e){t.useContext(h);var o=e.setIsOpen;return n.createElement("div",null,n.createElement(i.MenuOutlined,{onClick:function(){return o(!0)},style:{color:"rgb(24, 144, 255)",outline:"none",fontSize:"1.5em"}}))},Ge=function(e){var o=t.useState(!1),a=o[0],l=o[1],i=e.person,s=e.chat,c=e.conn;return i&&s&&c&&null!==c?n.createElement("div",{className:"ce-person-container",onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)}},n.createElement("div",{className:"ce-person-avatar",style:{padding:"2px",height:"0px"}},n.createElement(r.Avatar,{avatar:i.avatar,username:i.username,is_online:i.is_online})),n.createElement("div",{className:"ce-person-text",style:{paddingLeft:"52px",height:"44px",position:"relative",top:"10px",fontSize:"15px"}},function(e){return e.first_name&&null!==e.first_name?e.first_name+(e.last_name?" "+e.last_name:""):e.username}(i)),a&&c.userName===s.admin.username&&i.username!==s.admin.username&&n.createElement("div",{className:"ce-delete-chat",style:{float:"right",height:"0px",position:"relative",bottom:"44px"}},n.createElement(r.Button,{theme:"danger",icon:"delete",onClick:function(){r.removePerson(e.conn,e.chat.id,e.person.username)}}))):n.createElement("div",null)};Ge.propTypes={person:Ae.object.isRequired,chat:Ae.object.isRequired,conn:Ae.object};var Je=function(e){var o=t.useState(!1),a=o[1],l=e.person,i=l.avatar,s=l.username;return n.createElement("div",{id:"ce-username-option-"+s,onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},onClick:function(){return e.onClick&&e.onClick()},style:q({},Ye.option,{backgroundColor:o[0]?"#f5f5f5":"white"})},n.createElement("div",null,n.createElement(r.Avatar,{username:s,avatar:i})),n.createElement("div",{style:{display:"flex",padding:"12px 4px"}},e.person.username))},Ye={option:{padding:"4px 16px",cursor:"pointer",fontSize:"15px",display:"flex"}};Je.propTypes={person:Ae.object.isRequired};var Xe=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.translate,a=t.useState({value:"",others:[]}),l=a[0],i=a[1];function s(){r.getOtherPeople(e.conn,e.chat.id,function(e,t){return i(q({},l,{others:t}))},function(){})}return n.createElement("div",{style:{marginBottom:"12px"}},n.createElement(r.AutoCompleteInput,{style:{width:"100%"},label:o("Type a username","PersonForm"),value:l.value,options:l.others,onFocus:function(){return s()},handleChange:function(e){return function(e){i(q({},l,{value:e}))}(e)},renderOption:function(t){return function(t){return n.createElement(Je,{person:t,onClick:function(){r.addPerson(e.conn,e.chat.id,t.username,function(){i(q({},l,{value:""})),s()})}})}(t)},max:-1}))};Xe.propTypes={chat:Ae.object.isRequired,conn:Ae.object.isRequired};var Ze=function(e){var o=t.useState(!0),r=o[0],a=o[1],l=t.useState(!1),s=l[1];return n.createElement("div",{style:{borderTop:"1px solid #f0f0f0"}},n.createElement("div",{id:e.id,className:e.className,onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},onClick:function(){return a(!r)},style:{cursor:"pointer",backgroundColor:l[0]?"#f0f0f0":"#fff",transition:"background-color 100ms"}},n.createElement("div",{style:{fontSize:"17px",padding:"12px",fontWeight:"600"}},e.label),!e.alwaysOpen&&n.createElement(i.LeftOutlined,{style:{float:"right",position:"relative",bottom:"30px",right:"12px",transform:r?"rotate(0deg)":"rotate(-90deg)",transition:"transform 100ms"}})),n.createElement("div",null,(!r||e.alwaysOpen)&&e.children))},Qe=function(){var e=t.useContext(r.ChatEngineContext),o=e.conn,a=e.chats,l=e.userCallbacks.translate,i=a&&a[e.activeChat];return!i||i.is_direct_chat?n.createElement("div",null):n.createElement("div",{style:{borderTop:"1px solid #f0f0f0"}},n.createElement(Ze,{label:l("People","PeopleSettings"),className:"ce-section-title-container ce-person-title-container"},n.createElement("div",null,n.createElement("div",{style:{height:"12px"}}),function(e,t){return e.map(function(e,r){return n.createElement(Ge,{key:"person_"+r,person:e.person,conn:o,chat:t})})}(i.people,i),n.createElement("div",{style:{height:"12px"}}),o&&i&&o.userName===i.admin.username&&n.createElement(Xe,{conn:o,chat:i}))))},et=["jpg","jpeg","png","gif","tiff"],tt=function(e){var t=e.split(".");return t.length>0&&-1!==et.indexOf(t[t.length-1].toLowerCase())},nt=function(e){var t=e.split("/");return t[t.length-1].split("?")[0]},ot=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.openAttachment,a=e.attachment;if(!a)return n.createElement("div",null);var l=nt(a.file);return n.createElement("div",{style:rt.container,className:"ce-photo-thumbnail",onClick:function(){return o(a,"image")}},n.createElement("div",{style:{paddingTop:"100%"}}),tt(l)?n.createElement("img",{alt:a.id,style:rt.image,src:a.file,className:"ce-photo-img",id:"image-"+a.id}):n.createElement("div",{alt:a.id,style:rt.file,className:"ce-settings-file",id:"image-"+a.id},l))},rt={container:{position:"relative",width:"calc(33% - 8px)",border:"1px solid white",display:"inline-block",cursor:"pointer"},image:{top:"0px",width:"100%",height:"100%",position:"absolute",objectFit:"cover"},file:{top:"0px",width:"100%",height:"100%",position:"absolute",overflow:"auto",padding:"10px 5px"}};ot.propTypes={attachment:Ae.object.isRequired};var at=function(){var e=t.useContext(r.ChatEngineContext),o=e.chats,a=o&&o[e.activeChat];return a?n.createElement("div",{style:{borderTop:"1px solid #f0f0f0"},className:"ce-photo-section"},n.createElement(Ze,{label:(0,e.userCallbacks.translate)("Files","PhotosSettings"),className:"ce-section-title-container ce-photo-title-container"},n.createElement("div",{className:"ce-photo-feed"},n.createElement("div",{style:{height:"12px"}}),a.attachments.map(function(e,t){return n.createElement(ot,{key:"person_"+t,attachment:e})})))):n.createElement("div",null)},lt=function(){var e=t.useContext(r.ChatEngineContext),o=e.conn,a=e.chats,l=e.userCallbacks.translate,i=a&&a[e.activeChat];return i?n.createElement("div",{style:{borderTop:"1px solid #f0f0f0"}},n.createElement(Ze,{id:"ce-options-drop-down",label:l("Options","OptionsSettings"),alwaysOpen:!0},n.createElement("div",null,n.createElement("div",{style:{height:"8px"}}),n.createElement(r.Button,{value:l("Delete","OptionsSettings"),theme:"danger",icon:"delete",id:"ce-delete-chat-button",onClick:function(){return r.deleteChat(o,i.id,function(e){})},style:{width:"100%",marginBottom:"12px"}})))):n.createElement("div",null)},it=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.translate,a=t.useRef(!1),l=t.useState({activeChat:null,value:""}),i=l[0],s=l[1];return t.useEffect(function(){a.current?i.activeChat!==e.chat.id&&s(q({},i,{value:e.chat.title,activeChat:e.chat.id})):a.current=!0}),n.createElement("form",{onSubmit:function(t){return t.preventDefault(),void r.editChat(e.conn,e.chat.id,{title:i.value},function(e){})},className:"ce-chat-title-form"},n.createElement(r.TextInput,{label:o("Rename this Chat","NewMessageForm"),value:i.value,default:e.chat.title,handleChange:function(e){s(q({},i,{value:e.target.value}))},style:{fontSize:"16px",fontWeight:"600",textAlign:"center",border:"0px solid white",width:"100%"}}))};it.propTypes={chat:Ae.object.isRequired};var st,ct=function(){var e=t.useContext(r.ChatEngineContext),o=e.conn,a=e.chats,l=a&&a[e.activeChat];if(!l||!o||null===o)return n.createElement("div",null);var i=l.people.slice(0,3),s=l.people.find(function(e){return e.person.username!==o.userName});function c(e){return n.createElement("div",{style:{width:"100%",paddingTop:"14px"}},n.createElement("div",{style:{float:"left",position:"relative",left:"calc(50% - 22px)"}},n.createElement(r.Avatar,{show_online:!1,username:e[0].person.username,avatar:e[0].person.avatar})))}return n.createElement("div",{className:"ce-chat-settings-container"},n.createElement("div",{className:"ce-chat-avatars-row"},1===i.length&&c(i),l.is_direct_chat&&s&&c([s]),!l.is_direct_chat&&s&&2===i.length&&function(e){return n.createElement("div",{style:{width:"100%",paddingTop:"14px"}},n.createElement("div",{style:{float:"left",position:"relative",left:"calc(50% - 22px - 15px)"}},n.createElement(r.Avatar,{show_online:!1,username:e[0].person.username,avatar:e[0].person.avatar})),n.createElement("div",{style:{float:"left",position:"relative",left:"calc(50% - 44px - 22px + 15px)"}},n.createElement(r.Avatar,{show_online:!1,username:e[1].person.username,avatar:e[1].person.avatar})))}(i),!l.is_direct_chat&&s&&3===i.length&&function(e){return n.createElement("div",{style:{width:"100%",paddingTop:"14px"}},n.createElement("div",{style:{float:"left",position:"relative",left:"calc(50% - 22px - 24px)"}},n.createElement(r.Avatar,{show_online:!1,username:e[0].person.username,avatar:e[0].person.avatar})),n.createElement("div",{style:{float:"left",position:"relative",left:"calc(50% - 24px - 44px)"}},n.createElement(r.Avatar,{show_online:!1,username:e[1].person.username,avatar:e[1].person.avatar})),n.createElement("div",{style:{float:"left",position:"relative",left:"calc(50% - 22px - 44px - 44px + 24px)"}},n.createElement(r.Avatar,{show_online:!1,username:e[2].person.username,avatar:e[2].person.avatar})))}(i)),l.is_direct_chat&&s?n.createElement("div",{style:{paddingTop:"55px",paddingBottom:"7px",fontSize:"16px",fontWeight:"600",textAlign:"center",border:"0px solid white",width:"100%"}},s.person.username):n.createElement(it,{chat:l,conn:o}))},dt=function(e){var o=t.useContext(r.ChatEngineContext),a=o.conn,l=o.chats,i=l&&l[o.activeChat];return null===a?n.createElement("div",null):n.createElement("div",{style:ut.settingsContainer,className:"ce-settings"},n.createElement("div",{style:{width:"90%",paddingLeft:"5%"},className:"ce-settings-container"},e.renderChatSettingsTop?e.renderChatSettingsTop(a,i):n.createElement(ct,null),e.renderPeopleSettings?e.renderPeopleSettings(a,i):n.createElement(Qe,null),e.renderPhotosSettings?e.renderPhotosSettings(i):n.createElement(at,null),a&&i&&a.userName===i.admin.username&&n.createElement("div",null,e.renderOptionsSettings?e.renderOptionsSettings(a,i):n.createElement(lt,null))))},ut={settingsContainer:(st={height:"100%",overflow:"scroll",overflowX:"hidden",borderLeft:"1px solid #afafaf",backgroundColor:"white",flex:"1"},st.overflow="auto",st.paddingBottom="10px",st)},pt=function(e){t.useContext(r.ChatEngineContext);var o=e.setIsOpen;return n.createElement("div",null,n.createElement(i.SettingOutlined,{onClick:function(){return o(!0)},style:{color:"rgb(24, 144, 255)",outline:"none",fontSize:"1.5em"}}))};c.setConfiguration({maxScreenClass:"xl",gutterWidth:0});var ft,mt,ht=function(e){var o=t.useContext(r.ChatEngineContext),a=o.conn,l=o.chats,s=o.userCallbacks,d=s.translate,u=s.formatDateTime,f=l?l[o.activeChat]:void 0,m=f&&a&&f.people.find(function(e){return e.person.username!==a.userName}),h=f?f.is_direct_chat&&m?m.person.username:f.title:void 0,g=d("Say hello!","ChatHeader");if(f){if(f.last_message.created&&f.last_message.created.length>0){var v=p(f.last_message.created);g=d("Active","ChatHeader")+" "+u(v,"ago")}}else g=d("Loading...","ChatHeader");return n.createElement(c.Row,{className:"ce-chat-title",style:gt.titleSection},n.createElement(c.Col,{xs:2,sm:0,style:q({},gt.mobileOptiom,{left:"6px"}),className:"ce-chat-list-mobile-option"},n.createElement(Ue,{setIsOpen:e.setChatListIsOpen})),n.createElement(c.Col,{xs:8,sm:12,style:gt.titleContainer,className:"ce-chat-title-container"},n.createElement("div",{style:gt.titleText,className:"ce-chat-title-text",id:"ce-chat-feed-title-"+h},h||n.createElement(i.LoadingOutlined,null)),n.createElement("div",{style:gt.subtitleText,className:"ce-chat-subtitle-text"},g)),n.createElement(c.Col,{xs:2,sm:0,style:q({},gt.mobileOptiom,{right:"6px"}),className:"ce-chat-settings-mobile-option"},n.createElement(pt,{setIsOpen:e.setChatSettingsIsOpen})))},gt={titleSection:{position:"absolute",top:"0px",width:"100%",zIndex:"1",backgroundColor:"rgb(256, 256, 256, 0.92)"},mobileOptiom:{width:"100%",top:"32px",textAlign:"center",color:"rgb(24, 144, 255)",overflow:"hidden"},titleContainer:{width:"100%",padding:"18px 0px",textAlign:"center",color:"rgb(24, 144, 255)",overflowX:"hidden"},titleText:{fontSize:"24px",fontWeight:"600"},subtitleText:{fontSize:"12px"}},qt=function(e){var o=e.chatListIsOpen,r=e.setChatListIsOpen,a=t.useContext(h),l=q({},e,a.conn);return n.createElement("div",null,o&&n.createElement("div",{style:vt.drawerContainer},null!==a.conn&&a.conn.renderChatList?a.conn.renderChatList(a):n.createElement(W,q({},l,{onClose:function(){return r(!1)},onChatClick:function(){return r(!1)}}))))},vt={drawerContainer:{position:"absolute",zIndex:"1",top:"0px",left:"0px",width:"100%",height:"100%",backgroundColor:"white",textAlign:"left"},titleContainer:{width:"100%",padding:"24px 0px",textAlign:"center",color:"rgb(24, 144, 255)"},titleText:{fontSize:"24px",fontWeight:"600"}},bt=function(e){var o=e.chatSettingsIsOpen,a=e.setChatSettingsIsOpen,l=t.useContext(r.ChatEngineContext),s=l.userCallbacks.translate,c=q({},e,l.conn);return n.createElement("div",{className:"ce-chat-settings"},o&&n.createElement("div",{style:xt.drawerContainer},n.createElement(i.CloseOutlined,{style:xt.closeIcon,onClick:function(){return a(!1)}}),n.createElement("div",{style:xt.titleContainer},n.createElement("div",{style:xt.titleText},s("Chat Settings","ChatSettingsDrawer"))),null!==l.conn&&l.conn.renderChatSettings?l.conn.renderChatSettings(l):n.createElement(dt,c)))},xt={drawerContainer:{position:"absolute",zIndex:"1",top:"0px",left:"0px",width:"100%",height:"100%",backgroundColor:"white",textAlign:"left",display:"flex",flexFlow:"column"},closeIcon:{position:"absolute",left:"28px",top:"32px"},titleContainer:{width:"100%",padding:"24px 0px",textAlign:"center",color:"rgb(24, 144, 255)"},titleText:{fontSize:"24px",fontWeight:"600"}},yt=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.formatDateTime,a=e.lastCreated,l=e.created;function i(e){return e?e.substr(0,10):null}var s=i(a),c=i(l);return a&&s===c?n.createElement("div",null):n.createElement("div",{style:wt.dateText,className:"ce-message-date-text"},o(p(l),"datetime"))},wt={dateText:{width:"100%",textAlign:"center",paddingTop:"4px",paddingBottom:"10px",fontSize:"15px",color:"rgba(0, 0, 0, .40)"}},Ct=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.openAttachment,a=t.useState(!1),l=a[1],s=e.attachment,c=q({},Et.thumbnail,{border:a[0]?"1px solid #1890ff":"1px solid #fff"});return s?n.createElement("img",{onClick:function(){return o(s,"image")},onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},src:s.file,alt:"thumb-nail",style:c}):n.createElement("div",{style:Et.loadingContainer},n.createElement(i.LoadingOutlined,{style:{color:"white",padding:"4px",fontSize:"24px"}}))},Et={loadingContainer:(ft={width:"100%",cursor:"pointer",textAlign:"right",display:"inline-block",objectFit:"cover",borderRadius:"0.3em",marginRight:"2px",marginBottom:"4px",height:"30vw"},ft.width="30vw",ft.maxHeight="200px",ft.maxWidth="200px",ft.minHeight="100px",ft.minWidth="100px",ft.backgroundColor="#d9d9d9",ft),thumbnail:(mt={width:"100%",cursor:"pointer",textAlign:"right",display:"inline",objectFit:"cover",borderRadius:"0.3em",paddingRight:"2px",height:"30vw"},mt.width="30vw",mt.maxHeight="200px",mt.maxWidth="200px",mt.minHeight="100px",mt.minWidth="100px",mt)},kt=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.openAttachment,a=t.useState(!1),l=a[0],s=a[1],c=e.attachment,d=q({},St.fileView,{color:l?"#1890ff":"#434343",border:l?"1px solid #1890ff":"1px solid #434343"});return c?n.createElement("div",{style:d,onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},onClick:function(){return o(c,"file")}},n.createElement(i.FileOutlined,null)," ",nt(c.file)):n.createElement("div",{style:St.loadingContainer},n.createElement(i.LoadingOutlined,{style:{color:"white",padding:"4px",fontSize:"24px"}}))},St={loadingContainer:{display:"inline-block",borderRadius:"14px",marginRight:"2px",height:"48px",width:"136px",marginBottom:"4px",marginLeft:"4px",backgroundColor:"#d9d9d9"},fileView:{padding:"12px",borderRadius:"14px",display:"inline-block",marginBottom:"4px",marginRight:"2px",cursor:"pointer"}},Nt=["#D64045","#5B3000","#00CC99","#467599","#1D3354","#8F250C","#6153CC","#961D4E","#A29F15","#0CAADC","#FF5154","#FA7921","#688E26","#550527","#A10702","#FF1053","#6C6EA0","#100B00"];function Mt(e){return e?Nt[function(e){for(var t=0,n=0;n<e.length;n++)t=t+e.charCodeAt(n)*n-97;return t}(e)%Nt.length]:"black"}var _t=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={avatar:""},t}v(t,e);var o=t.prototype;return o.updateImg=function(){var e=this.props.avatar;(e=e&&null!==e?e:"").split("?")[0]!==this.state.avatar.split("?")[0]&&this.setState({avatar:e})},o.componentDidMount=function(){this.updateImg()},o.componentDidUpdate=function(){this.updateImg()},o.render=function(){var e=Mt(this.props.username);return n.createElement("div",{className:"ce-avatar-dot",style:q({},Ot.dot,this.props.style?this.props.style:{},{backgroundColor:this.state.avatar?"white":e,backgroundImage:this.state.avatar&&"url("+this.state.avatar+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"14px",width:this.props.visible?"13px":"0px",height:this.props.visible?"13px":"0px"})})},t}(t.Component),Ot={dot:{borderRadius:"13px",textAlign:"center",transition:"all .33s ease",WebkitTransition:"all .33s ease",MozTransition:"all .33s ease"}};_t.propTypes={avatar:Ae.string,username:Ae.string,style:Ae.object};var Tt=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.htmlMessageTransform,a=e.text?e.text:"";a=a.replaceAll("<p>","<div>").replaceAll("</p>","</div>").replaceAll("<a ",'<a style="color: '+(e.myMessage?"white":"#1890ff")+';" ');var l={};return o&&(l.transform=o),n.createElement("div",{className:"ce_message"},d(a,l))};c.setConfiguration({maxScreenClass:"xl"});var It=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.formatDateTime,a=t.useState(!1),l=a[0],i=a[1],s=e.lastMessage,d=e.message,u=e.nextMessage;if(!d)return n.createElement("div",null);var f=d&&d.attachments&&d.attachments,m="1.3em "+(s&&s.sender_username===d.sender_username?"0.3em":"1.3em")+" "+(u&&u.sender_username===d.sender_username?"0.3em":"1.3em")+" 1.3em";return n.createElement("div",{className:"ce-message-row ce-my-message",style:{width:"100%",textAlign:"right",paddingBottom:u&&u.sender_username===d.sender_username?"2px":"12px"}},n.createElement("div",{style:{display:"auto"},className:"ce-my-message-attachments-container ce-my-message-images-container"},function(){var t=e.message;return(t&&t.attachments?t.attachments:[]).map(function(e,t){var o=nt(e.file?e.file:e.name);return tt(o)?n.createElement(Ct,{attachment:e.file&&e,key:"attachment_"+t}):n.createElement("div",{key:"attachment"+t})})}()),n.createElement("div",{style:{display:"auto"},className:"ce-my-message-attachments-container ce-my-message-files-container"},function(){var t=e.message;return(t&&t.attachments?t.attachments:[]).map(function(e,t){var o=nt(e.file?e.file:e.name);return tt(o)?n.createElement("div",{key:"attachment"+t}):n.createElement(kt,{attachment:e.file&&e,key:"attachment_"+t})})}()),n.createElement(c.Row,{style:{paddingRight:"2px"},className:"ce-message-bubble-row ce-my-message-bubble-row"},n.createElement(c.Col,{xs:12,sm:12,md:12},n.createElement("span",{className:"ce-message-timestamp ce-my-message-timestamp",style:q({},Dt.timeTag,{opacity:l?"1":"0"})},o(p(d.created),"time")),!f||d.text&&n.createElement("div",{className:"\n                                ce-message-bubble \n                                ce-my-message-bubble \n                                "+(e.sending&&"ce-my-message-sinding-bubble")+"\n                            ",style:q({},Dt.myMessage,{borderRadius:m},{backgroundColor:e.sending?"#40a9ff":"rgb(24, 144, 255)"}),onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)}},n.createElement(Tt,{myMessage:!0,text:d.text}))),n.createElement(c.Col,{xs:1,sm:2,md:3})))},Dt={myMessage:{color:"white",cursor:"pointer",float:"right",textAlign:"left",padding:"12px",fontSize:"15px",whiteSpace:"pre-line",overflowWrap:"anywhere",maxWidth:"calc(100% - 100px)",transition:"all .33s ease",WebkitTransition:"all .33s ease",MozTransition:"all .33s ease"},timeTag:{position:"relative",top:"calc(50% - 12px)",right:"8px",fontSize:"14px",color:"rgb(24, 144, 255)",transition:"all .15s ease",WebkitTransition:"all .15s ease",MozTransition:"all .15s ease"}};c.setConfiguration({maxScreenClass:"xl"});var zt=function(e){var o=t.useContext(r.ChatEngineContext).userCallbacks.formatDateTime,a=t.useState(!1),l=a[0],i=a[1],s=e.lastMessage,d=e.message,u=e.nextMessage;if(!d)return n.createElement("div",null);var f=d&&d.attachments&&d.attachments,m=(s&&s.sender_username===d.sender_username?"0.3em":"1.3em")+" 1.3em 1.3em "+(u&&u.sender_username===d.sender_username?"0.3em":"1.3em");return n.createElement("div",{style:{width:"100%",paddingBottom:u&&u.sender_username===d.sender_username?"2px":"12px"},className:"ce-message-row ce-their-message"},(!s||s.sender_username!==d.sender_username)&&n.createElement("div",{style:Rt.nameText,className:"ce-their-message-sender"},d.sender_username),n.createElement(c.Row,{style:{paddingLeft:"2px"},className:"ce-their-message-row"},n.createElement(c.Col,{xs:12,sm:12,md:12},n.createElement("div",{style:{height:"0px"},className:"ce-their-message-avatar"},(!u||u.sender_username!==d.sender_username)&&n.createElement(r.Avatar,{show_online:!1,username:d.sender_username,avatar:d.sender&&d.sender.avatar})),n.createElement("div",{style:{display:"auto",paddingLeft:"50px"},className:"ce-their-message-attachments-container ce-their-message-images-container"},function(){var t=e.message;return(t&&t.attachments?t.attachments:[]).map(function(e,t){var o=nt(e.file);return tt(o)?n.createElement(Ct,{attachment:e,key:"attachment_"+t}):n.createElement("div",{key:"attachment"+t})})}()),n.createElement("div",{style:{display:"auto",paddingLeft:"50px"},className:"ce-their-message-attachments-container ce-their-message-files-container"},function(){var t=e.message;return(t&&t.attachments?t.attachments:[]).map(function(e,t){var o=nt(e.file);return tt(o)?n.createElement("div",{key:"attachment"+t}):n.createElement(kt,{attachment:e,key:"attachment_"+t})})}()),!f||d.text&&n.createElement("div",{style:{paddingLeft:"48px"}},n.createElement("div",{className:"ce-message-bubble ce-their-message-bubble",style:q({},Rt.theirMessage,{borderRadius:m}),onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)}},n.createElement(Tt,{text:d.text}))),n.createElement("span",{className:"ce-message-timestamp ce-their-message-timestamp",style:q({},Rt.timeTag,{opacity:l?"1":"0"})},o(p(d.created),"time"))),n.createElement(c.Col,{xs:9,style:{marginLeft:"48px"},className:"ce-reads-row ce-their-reads-row"},function(){var t=e.chat,o=e.message;return t?t.people.map(function(e,t){return n.createElement(r.Dot,{key:"read_"+t,avatar:e.person.avatar,username:e.person.username,visible:o.id===e.last_read,style:{float:"left",marginLeft:"4px"}})}):n.createElement("div",null)}())))},Rt={theirMessage:{cursor:"pointer",color:"black",float:"left",padding:"12px",fontSize:"15px",whiteSpace:"pre-line",backgroundColor:"#f1f0f0",overflowWrap:"anywhere",maxWidth:"calc(100% - 100px)",transition:"all .33s ease",WebkitTransition:"all .33s ease",MozTransition:"all .33s ease"},nameText:{paddingLeft:"62px",paddingBottom:"2px",color:"rgba(0, 0, 0, .40)",fontSize:"15px"},timeTag:{position:"relative",top:"calc(50% - 12px)",left:"8px",fontSize:"14px",color:"rgba(0, 0, 0, 0.4)",transition:"all .15s ease",WebkitTransition:"all .15s ease",MozTransition:"all .15s ease"}},At=function(e){var o=e.lastMessage,r=e.message,a=e.nextMessage,l=e.chat,i=t.useContext(h).conn;return r&&l&&i&&null!==i?n.createElement("div",{className:"ce-message-and-date"},n.createElement(yt,{lastCreated:o?o.created:null,created:r.created,offset:i.offset}),r.sender_username===i.userName||r.sender_username===i.senderUsername?n.createElement(It,{chat:l,conn:i,sending:!r.id,lastMessage:o,message:r,nextMessage:a}):n.createElement(zt,{chat:l,conn:i,lastMessage:o,message:r,nextMessage:a})):n.createElement("div",null)},Ft=function(e){var o=t.useContext(h),r=o.conn,a=o.chats,l=o.messages,i=o.setIsBottomVisible,s=a&&a[o.activeChat],c=Object.keys(l);return r&&null!==r&&s?c.map(function(t,o){var a=l[t],d=0===o?null:c[o-1],u=o===c.length-1?null:c[o+1];return e.renderMessageBubble?n.createElement("div",{key:"message_"+o},o===c.length-1&&n.createElement(Ke,{id:"ce-first-message-render-trigger",onEnter:function(){return i(!0)},onLeave:function(){return i(!1)}}),e.renderMessageBubble(r,s,l[d],a,l[u])):n.createElement("div",{key:"message_"+o,id:"ce-message-"+a.id},o===c.length-1&&n.createElement(Ke,{id:"ce-last-message-render-trigger",onEnter:function(){return i(!0)},onLeave:function(){return i(!1)}}),n.createElement(At,{chat:s,message:a,lastMessage:l[d],nextMessage:l[u]}))}):n.createElement("div",null)},jt=function(){var e=t.useRef(!1),o=t.useState(Date.now()),r=o[0],a=o[1],l=t.useContext(h),i=l.conn,s=l.activeChat,c=l.typingCounter,d=l.userCallbacks.translate,u=c&&c[s]?c[s]:[];return t.useEffect(function(){e.current||(e.current=!0,setInterval(function(){a(Date.now())},1e3))}),i&&null!==i?n.createElement("div",null,Object.keys(u).map(function(e,t){return i.userName!==e&&r<u[e]+2e3?n.createElement("div",{key:"typer_"+t,className:"ce-user-typing-text",style:{color:Mt(e),padding:"2px",paddingLeft:"12px"}},e+" "+d("is typing...","IsTyping")):n.createElement("div",{key:"typer_"+t})})):n.createElement("div",null)},Pt=["jpg","jpeg","png","gif","tiff"],Lt=function(e){var t=e.split(".");return t.length>0&&-1!==Pt.indexOf(t[t.length-1].toLowerCase())},Bt=function(e){var o=t.useState(!1),r=o[0],a=o[1];return n.createElement("div",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},style:q({},Ht.filePreview,{paddingRight:r?"6px":"26px"})},n.createElement(i.FileOutlined,null)," ",e.file&&e.file.name," "," ",r&&n.createElement(i.CloseCircleTwoTone,{style:Ht.closeIcon,onClick:function(){return e.onRemove&&e.onRemove()}}))},Ht={filePreview:{padding:"12px",display:"inline-block",position:"relative",border:"1px solid #40a9ff",color:"#434343",borderRadius:"14px"},closeIcon:{}},$t=function(e){return n.createElement("div",{className:"ce-message-files-row",style:{width:"100%",padding:e.files.lenth>0?"6px 16px":"0px"}},e.files.map(function(t,o){return Lt(t.name)?n.createElement("div",{key:"no_file_"+o}):n.createElement(Bt,{file:t,key:"thumb_"+o,onRemove:function(){return e.onRemove&&e.onRemove(o)}})}))},Wt=function(e){var o=t.useState(!1),r=o[0],a=o[1],l=t.useState(""),s=l[0],c=l[1];return t.useEffect(function(){c(URL.createObjectURL(e.file))},[e.file]),n.createElement("div",{style:{padding:"6px",display:"inline-block",position:"relative"},onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)}},n.createElement("img",{style:Vt.imageSquare,alt:e.file?e.file.name:"",src:s}),r&&n.createElement(i.CloseCircleTwoTone,{style:Vt.closeIcon,onClick:function(){return e.onRemove&&e.onRemove()}}))},Vt={imageSquare:{height:"108px",width:"108px",border:"1px solid #afafaf",borderRadius:"8px",objectFit:"cover",display:"inline"},closeIcon:{position:"absolute",bottom:"calc(100% - 32px)",left:"96px",width:"0px",cursor:"pointer"}},Kt=function(e){return n.createElement("div",{className:"ce-message-images-row",style:{width:"100%",paddingLeft:"12px"}},e.files.map(function(t,o){return Lt(t.name)?n.createElement(Wt,{file:t,key:"thumb_"+o,onRemove:function(){return e.onRemove&&e.onRemove(o)}}):n.createElement("div",{key:"no_thumb_"+o})}))},Ut=function(e){var o=t.useState({hovered:!1}),r=o[0],a=o[1];return n.createElement("form",{className:"uploader",encType:"multipart/form-data",style:{height:"0px"}},n.createElement("label",{htmlFor:"files",id:"upload-document-button"},n.createElement(i.PaperClipOutlined,{className:"ce-attachment-icon",onMouseEnter:function(){return a(q({},r,{hovered:!0}))},onMouseLeave:function(){return a(q({},r,{hovered:!1}))},style:q({},Gt.icon,{color:r.hovered?"#06c":"#444"})})),n.createElement("input",{multiple:!0,id:"files",style:{visibility:"hidden"},type:"file",onChange:function(t){return n=Array.from(t.target.files),void(e.onSelectFiles&&e.onSelectFiles(n));var n},onClick:function(e){return e.target.value=null}}))},Gt={icon:{background:"none",border:"none",cursor:"pointer",display:"inline-block",float:"left",height:"24px",padding:"4px 5px",width:"28px"}},Jt=function(){var e=t.useState(!1),o=e[1];return n.createElement("div",{id:"ce-send-message-button",onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},style:{cursor:"pointer",backgroundColor:e[0]?"#40a9ff":"#1890ff",display:"inline-block",padding:"8px 14px",borderRadius:"8px"}},n.createElement(i.ArrowUpOutlined,{style:{color:"white",fontSize:"1.5em"}}))},Yt={toolbar:{container:"#toolbar"}},Xt=["bold","italic","underline","strike","code","list","bullet","indent","link","code"],Zt=function(e){function t(t){var n;return n=e.call(this,t)||this,document&&(n.quill=require("react-quill")),n}return v(t,e),t.prototype.render=function(){var e=this,t=this.quill,o=this.props.translate;return t?n.createElement("div",{className:"ce-quill-container"},n.createElement(t,{theme:"snow",modules:Yt,formats:Xt,value:this.props.value,onChange:this.props.onChange,onKeyDown:function(t){13===t.keyCode&&e.props.onSubmit()}}),n.createElement("div",{id:"toolbar"},n.createElement("button",{className:"ql-bold"}),n.createElement("button",{className:"ql-italic"}),n.createElement("button",{className:"ql-underline"}),n.createElement("button",{className:"ql-strike"}),n.createElement("button",{className:"ql-code"}),n.createElement("button",{className:"ql-link"}),n.createElement(Ut,{onSelectFiles:function(t){return e.props.onAttach(t)}}),n.createElement("div",{className:"ce-send-button-container",onClick:this.props.onSubmit.bind(this),style:{position:"absolute",right:"5px",bottom:"1px"}},n.createElement(Jt,null))),n.createElement("style",null,"\n                /*!\n                * Quill Editor v1.3.7\n                * https://quilljs.com/\n                * Copyright (c) 2014, Jason Chen\n                * Copyright (c) 2013, salesforce.com\n                */\n                .ql-container{box-sizing:border-box;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;margin:0;position:relative}.ql-container.ql-disabled .ql-tooltip{visibility:hidden}.ql-container.ql-disabled .ql-editor ul[data-checked]>li::before{pointer-events:none}.ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}.ql-clipboard p{margin:0;padding:0}.ql-editor{box-sizing:border-box;line-height:1.42;height:100%;outline:0;overflow-y:auto;padding:12px 15px;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word}.ql-editor>*{cursor:text}.ql-editor blockquote,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6,.ql-editor ol,.ql-editor p,.ql-editor pre,.ql-editor ul{margin:0;padding:0;counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol,.ql-editor ul{padding-left:1.5em}.ql-editor ol>li,.ql-editor ul>li{list-style-type:none}.ql-editor ul>li::before{content:{};}.ql-editor ul[data-checked=false]{pointer-events:none}.ql-editor ul[data-checked=false]>li *,.ql-editor ul[data-checked=true]>li *{pointer-events:all}.ql-editor ul[data-checked=false]>li::before,.ql-editor ul[data-checked=true]>li::before{color:#777;cursor:pointer;pointer-events:all}.ql-editor ul[data-checked=true]>li::before{content:{};}.ql-editor li:not(.ql-direction-rtl)::before{margin-left:-1.5em;margin-right:.3em;text-align:right}.ql-editor li.ql-direction-rtl::before{margin-left:.3em;margin-right:-1.5em}.ql-editor ol li:not(.ql-direction-rtl),.ql-editor ul li:not(.ql-direction-rtl){padding-left:1.5em}.ql-editor ol li.ql-direction-rtl,.ql-editor ul li.ql-direction-rtl{padding-right:1.5em}.ql-editor ol li{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;counter-increment:list-0}.ql-editor ol li:before{content:counter(list-0,decimal) '. '}.ql-editor ol li.ql-indent-1{counter-increment:list-1}.ql-editor ol li.ql-indent-1:before{content:counter(list-1,lower-alpha) '. '}.ql-editor ol li.ql-indent-1{counter-reset:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-2{counter-increment:list-2}.ql-editor ol li.ql-indent-2:before{content:counter(list-2,lower-roman) '. '}.ql-editor ol li.ql-indent-2{counter-reset:list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-3{counter-increment:list-3}.ql-editor ol li.ql-indent-3:before{content:counter(list-3,decimal) '. '}.ql-editor ol li.ql-indent-3{counter-reset:list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-4{counter-increment:list-4}.ql-editor ol li.ql-indent-4:before{content:counter(list-4,lower-alpha) '. '}.ql-editor ol li.ql-indent-4{counter-reset:list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-5{counter-increment:list-5}.ql-editor ol li.ql-indent-5:before{content:counter(list-5,lower-roman) '. '}.ql-editor ol li.ql-indent-5{counter-reset:list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-6{counter-increment:list-6}.ql-editor ol li.ql-indent-6:before{content:counter(list-6,decimal) '. '}.ql-editor ol li.ql-indent-6{counter-reset:list-7 list-8 list-9}.ql-editor ol li.ql-indent-7{counter-increment:list-7}.ql-editor ol li.ql-indent-7:before{content:counter(list-7,lower-alpha) '. '}.ql-editor ol li.ql-indent-7{counter-reset:list-8 list-9}.ql-editor ol li.ql-indent-8{counter-increment:list-8}.ql-editor ol li.ql-indent-8:before{content:counter(list-8,lower-roman) '. '}.ql-editor ol li.ql-indent-8{counter-reset:list-9}.ql-editor ol li.ql-indent-9{counter-increment:list-9}.ql-editor ol li.ql-indent-9:before{content:counter(list-9,decimal) '. '}.ql-editor .ql-indent-1:not(.ql-direction-rtl){padding-left:3em}.ql-editor li.ql-indent-1:not(.ql-direction-rtl){padding-left:4.5em}.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:3em}.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:4.5em}.ql-editor .ql-indent-2:not(.ql-direction-rtl){padding-left:6em}.ql-editor li.ql-indent-2:not(.ql-direction-rtl){padding-left:7.5em}.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:6em}.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:7.5em}.ql-editor .ql-indent-3:not(.ql-direction-rtl){padding-left:9em}.ql-editor li.ql-indent-3:not(.ql-direction-rtl){padding-left:10.5em}.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:9em}.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:10.5em}.ql-editor .ql-indent-4:not(.ql-direction-rtl){padding-left:12em}.ql-editor li.ql-indent-4:not(.ql-direction-rtl){padding-left:13.5em}.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:12em}.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:13.5em}.ql-editor .ql-indent-5:not(.ql-direction-rtl){padding-left:15em}.ql-editor li.ql-indent-5:not(.ql-direction-rtl){padding-left:16.5em}.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:15em}.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:16.5em}.ql-editor .ql-indent-6:not(.ql-direction-rtl){padding-left:18em}.ql-editor li.ql-indent-6:not(.ql-direction-rtl){padding-left:19.5em}.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:18em}.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:19.5em}.ql-editor .ql-indent-7:not(.ql-direction-rtl){padding-left:21em}.ql-editor li.ql-indent-7:not(.ql-direction-rtl){padding-left:22.5em}.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:21em}.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:22.5em}.ql-editor .ql-indent-8:not(.ql-direction-rtl){padding-left:24em}.ql-editor li.ql-indent-8:not(.ql-direction-rtl){padding-left:25.5em}.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:24em}.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:25.5em}.ql-editor .ql-indent-9:not(.ql-direction-rtl){padding-left:27em}.ql-editor li.ql-indent-9:not(.ql-direction-rtl){padding-left:28.5em}.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:27em}.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:28.5em}.ql-editor .ql-video{display:block;max-width:100%}.ql-editor .ql-video.ql-align-center{margin:0 auto}.ql-editor .ql-video.ql-align-right{margin:0 0 0 auto}.ql-editor .ql-bg-black{background-color:#000}.ql-editor .ql-bg-red{background-color:#e60000}.ql-editor .ql-bg-orange{background-color:#f90}.ql-editor .ql-bg-yellow{background-color:#ff0}.ql-editor .ql-bg-green{background-color:#008a00}.ql-editor .ql-bg-blue{background-color:#06c}.ql-editor .ql-bg-purple{background-color:#93f}.ql-editor .ql-color-white{color:#fff}.ql-editor .ql-color-red{color:#e60000}.ql-editor .ql-color-orange{color:#f90}.ql-editor .ql-color-yellow{color:#ff0}.ql-editor .ql-color-green{color:#008a00}.ql-editor .ql-color-blue{color:#06c}.ql-editor .ql-color-purple{color:#93f}.ql-editor .ql-font-serif{font-family:Georgia,Times New Roman,serif}.ql-editor .ql-font-monospace{font-family:Monaco,Courier New,monospace}.ql-editor .ql-size-small{font-size:.75em}.ql-editor .ql-size-large{font-size:1.5em}.ql-editor .ql-size-huge{font-size:2.5em}.ql-editor .ql-direction-rtl{direction:rtl;text-align:inherit}.ql-editor .ql-align-center{text-align:center}.ql-editor .ql-align-justify{text-align:justify}.ql-editor .ql-align-right{text-align:right}.ql-editor.ql-blank::before{color:rgba(0,0,0,.6);content:attr(data-placeholder);font-style:italic;left:15px;pointer-events:none;position:absolute;right:15px}.ql-snow .ql-toolbar:after,.ql-snow.ql-toolbar:after{clear:both;content:'';display:table}.ql-snow .ql-toolbar button,.ql-snow.ql-toolbar button{background:0 0;border:none;cursor:pointer;display:inline-block;float:left;height:24px;padding:3px 5px;width:28px}.ql-snow .ql-toolbar button svg,.ql-snow.ql-toolbar button svg{float:left;height:100%}.ql-snow .ql-toolbar button:active:hover,.ql-snow.ql-toolbar button:active:hover{outline:0}.ql-snow .ql-toolbar input.ql-image[type=file],.ql-snow.ql-toolbar input.ql-image[type=file]{display:none}.ql-snow .ql-toolbar .ql-picker-item.ql-selected,.ql-snow .ql-toolbar .ql-picker-item:hover,.ql-snow .ql-toolbar .ql-picker-label.ql-active,.ql-snow .ql-toolbar .ql-picker-label:hover,.ql-snow .ql-toolbar button.ql-active,.ql-snow .ql-toolbar button:focus,.ql-snow .ql-toolbar button:hover,.ql-snow.ql-toolbar .ql-picker-item.ql-selected,.ql-snow.ql-toolbar .ql-picker-item:hover,.ql-snow.ql-toolbar .ql-picker-label.ql-active,.ql-snow.ql-toolbar .ql-picker-label:hover,.ql-snow.ql-toolbar button.ql-active,.ql-snow.ql-toolbar button:focus,.ql-snow.ql-toolbar button:hover{color:#06c}.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:focus .ql-fill,.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover .ql-fill,.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:focus .ql-fill,.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:hover .ql-fill,.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill{fill:#06c}.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow .ql-toolbar button.ql-active .ql-stroke,.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar button:focus .ql-stroke,.ql-snow .ql-toolbar button:focus .ql-stroke-miter,.ql-snow .ql-toolbar button:hover .ql-stroke,.ql-snow .ql-toolbar button:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow.ql-toolbar button.ql-active .ql-stroke,.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar button:focus .ql-stroke,.ql-snow.ql-toolbar button:focus .ql-stroke-miter,.ql-snow.ql-toolbar button:hover .ql-stroke,.ql-snow.ql-toolbar button:hover .ql-stroke-miter{stroke:#06c}@media (pointer:coarse){.ql-snow .ql-toolbar button:hover:not(.ql-active),.ql-snow.ql-toolbar button:hover:not(.ql-active){color:#444}.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill{fill:#444}.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter{stroke:#444}}.ql-snow{box-sizing:border-box}.ql-snow *{box-sizing:border-box}.ql-snow .ql-hidden{display:none}.ql-snow .ql-out-bottom,.ql-snow .ql-out-top{visibility:hidden}.ql-snow .ql-tooltip{position:absolute;transform:translateY(10px)}.ql-snow .ql-tooltip a{cursor:pointer;text-decoration:none}.ql-snow .ql-tooltip.ql-flip{transform:translateY(-10px)}.ql-snow .ql-formats{display:inline-block;vertical-align:middle}.ql-snow .ql-formats:after{clear:both;content:'';display:table}.ql-snow .ql-stroke{fill:none;stroke:#444;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}.ql-snow .ql-stroke-miter{fill:none;stroke:#444;stroke-miterlimit:10;stroke-width:2}.ql-snow .ql-fill,.ql-snow .ql-stroke.ql-fill{fill:#444}.ql-snow .ql-empty{fill:none}.ql-snow .ql-even{fill-rule:evenodd}.ql-snow .ql-stroke.ql-thin,.ql-snow .ql-thin{stroke-width:1}.ql-snow .ql-transparent{opacity:.4}.ql-snow .ql-direction svg:last-child{display:none}.ql-snow .ql-direction.ql-active svg:last-child{display:inline}.ql-snow .ql-direction.ql-active svg:first-child{display:none}.ql-snow .ql-editor h1{font-size:2em}.ql-snow .ql-editor h2{font-size:1.5em}.ql-snow .ql-editor h3{font-size:1.17em}.ql-snow .ql-editor h4{font-size:1em}.ql-snow .ql-editor h5{font-size:.83em}.ql-snow .ql-editor h6{font-size:.67em}.ql-snow .ql-editor a{text-decoration:underline}.ql-snow .ql-editor blockquote{border-left:4px solid #ccc;margin-bottom:5px;margin-top:5px;padding-left:16px}.ql-snow .ql-editor code,.ql-snow .ql-editor pre{background-color:#f0f0f0;border-radius:3px}.ql-snow .ql-editor pre{white-space:pre-wrap;margin-bottom:5px;margin-top:5px;padding:5px 10px}.ql-snow .ql-editor code{font-size:85%;padding:2px 4px}.ql-snow .ql-editor pre.ql-syntax{background-color:#23241f;color:#f8f8f2;overflow:visible}.ql-snow .ql-editor img{max-width:100%}.ql-snow .ql-picker{color:#444;display:inline-block;float:left;font-size:14px;font-weight:500;height:24px;position:relative;vertical-align:middle}.ql-snow .ql-picker-label{cursor:pointer;display:inline-block;height:100%;padding-left:8px;padding-right:2px;position:relative;width:100%}.ql-snow .ql-picker-label::before{display:inline-block;line-height:22px}.ql-snow .ql-picker-options{background-color:#fff;display:none;min-width:100%;padding:4px 8px;position:absolute;white-space:nowrap}.ql-snow .ql-picker-options .ql-picker-item{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px}.ql-snow .ql-picker.ql-expanded .ql-picker-label{color:#ccc;z-index:2}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-options{display:block;margin-top:-1px;top:100%;z-index:1}.ql-snow .ql-color-picker,.ql-snow .ql-icon-picker{width:28px}.ql-snow .ql-color-picker .ql-picker-label,.ql-snow .ql-icon-picker .ql-picker-label{padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-label svg,.ql-snow .ql-icon-picker .ql-picker-label svg{right:4px}.ql-snow .ql-icon-picker .ql-picker-options{padding:4px 0}.ql-snow .ql-icon-picker .ql-picker-item{height:24px;width:24px;padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-options{padding:3px 5px;width:152px}.ql-snow .ql-color-picker .ql-picker-item{border:1px solid transparent;float:left;height:16px;margin:2px;padding:0;width:16px}.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{position:absolute;margin-top:-9px;right:0;top:50%;width:18px}.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before{content:attr(data-label)}.ql-snow .ql-picker.ql-header{width:98px}.ql-snow .ql-picker.ql-header .ql-picker-item::before,.ql-snow .ql-picker.ql-header .ql-picker-label::before{content:'"+o("Normal","FormHtmlEditor")+'\'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="1"]::before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="1"]::before{content:\''+o("Heading 1","FormHtmlEditor")+'\'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="2"]::before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="2"]::before{content:\''+o("Heading 2","FormHtmlEditor")+'\'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="3"]::before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="3"]::before{content:\''+o("Heading 3","FormHtmlEditor")+'\'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="4"]::before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="4"]::before{content:\''+o("Heading 4","FormHtmlEditor")+'\'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="5"]::before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="5"]::before{content:\''+o("Heading 5","FormHtmlEditor")+'\'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="6"]::before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="6"]::before{content:\''+o("Heading 6","FormHtmlEditor")+'\'}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="1"]::before{font-size:2em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="2"]::before{font-size:1.5em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="3"]::before{font-size:1.17em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="4"]::before{font-size:1em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="5"]::before{font-size:.83em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="6"]::before{font-size:.67em}.ql-snow .ql-picker.ql-font{width:108px}.ql-snow .ql-picker.ql-font .ql-picker-item::before,.ql-snow .ql-picker.ql-font .ql-picker-label::before{content:\''+o("Sans Serif","FormHtmlEditor")+"'}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]::before{content:'"+o("Serif","FormHtmlEditor")+"'}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]::before{content:'"+o("Monospace","FormHtmlEditor")+"'}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]::before{font-family:Georgia,Times New Roman,serif}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]::before{font-family:Monaco,Courier New,monospace}.ql-snow .ql-picker.ql-size{width:98px}.ql-snow .ql-picker.ql-size .ql-picker-item::before,.ql-snow .ql-picker.ql-size .ql-picker-label::before{content:'"+o("Normal","FormHtmlEditor")+"'}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]::before{content:'"+o("Small","FormHtmlEditor")+"'}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]::before{content:'"+o("Large","FormHtmlEditor")+"'}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]::before{content:'"+o("Huge","FormHtmlEditor")+"'}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]::before{font-size:10px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]::before{font-size:18px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]::before{font-size:32px}.ql-snow .ql-color-picker.ql-background .ql-picker-item{background-color:#fff}.ql-snow .ql-color-picker.ql-color .ql-picker-item{background-color:#000}.ql-toolbar.ql-snow{border:1px solid #ccc;box-sizing:border-box;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;padding:8px}.ql-toolbar.ql-snow .ql-formats{margin-right:15px}.ql-toolbar.ql-snow .ql-picker-label{border:1px solid transparent}.ql-toolbar.ql-snow .ql-picker-options{border:1px solid transparent;box-shadow:rgba(0,0,0,.2) 0 2px 8px}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label{border-color:#ccc}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options{border-color:#ccc}.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover{border-color:#000}.ql-toolbar.ql-snow+.ql-container.ql-snow{border-top:0}.ql-snow .ql-tooltip{background-color:#fff;border:1px solid #ccc;box-shadow:0 0 5px #ddd;color:#444;padding:5px 12px;white-space:nowrap}.ql-snow .ql-tooltip::before{content:\""+o("Visit URL:","FormHtmlEditor")+"\";line-height:26px;margin-right:8px}.ql-snow .ql-tooltip input[type=text]{display:none;border:1px solid #ccc;font-size:13px;height:26px;margin:0;padding:3px 5px;width:170px}.ql-snow .ql-tooltip a.ql-preview{display:inline-block;max-width:200px;overflow-x:hidden;text-overflow:ellipsis;vertical-align:top}.ql-snow .ql-tooltip a.ql-action::after{border-right:1px solid #ccc;content:'"+o("Edit","FormHtmlEditor")+"';margin-left:16px;padding-right:8px}.ql-snow .ql-tooltip a.ql-remove::before{content:'"+o("Remove","FormHtmlEditor")+"';margin-left:8px}.ql-snow .ql-tooltip a{line-height:26px}.ql-snow .ql-tooltip.ql-editing a.ql-preview,.ql-snow .ql-tooltip.ql-editing a.ql-remove{display:none}.ql-snow .ql-tooltip.ql-editing input[type=text]{display:inline-block}.ql-snow .ql-tooltip.ql-editing a.ql-action::after{border-right:0;content:'"+o("Save","FormHtmlEditor")+"';padding-right:0}.ql-snow .ql-tooltip[data-mode=link]::before{content:\""+o("Enter link:","FormHtmlEditor")+'"}.ql-snow .ql-tooltip[data-mode=formula]::before{content:"'+o("Enter formula:","FormHtmlEditor")+'"}.ql-snow .ql-tooltip[data-mode=video]::before{content:"'+o("Enter video:","FormHtmlEditor")+'"}.ql-snow a{color:#06c}.ql-container.ql-snow{border:1px solid #ccc}\n                ')):n.createElement("div",null)},t}(t.Component),Qt=function(){var e=t.useContext(r.ChatEngineContext),o=e.conn,a=e.activeChat,l=e.messages,i=e.setMessages,s=e.userCallbacks,c=s.translate,d=s.onMessageSent,u=t.useState(0),p=u[0],f=u[1],m=t.useState(""),h=m[0],g=m[1],v=t.useState(0),b=v[0],x=v[1],y=t.useState([]),w=y[0],C=y[1];function E(e){var t=w;t.splice(e,1),C(t),f(p+1)}return n.createElement("div",{id:"msg-form-container",style:en.NewMessageFormContainer,className:"ce-message-form-container"},n.createElement(Kt,{files:w,onRemove:function(e){return E(e)}}),n.createElement($t,{files:w,onRemove:function(e){return E(e)}}),n.createElement(Zt,{theme:"snow",value:h,onChange:function(e){g(e),x((b+1)%4),1===b&&o&&r.isTyping(o,a)}.bind(void 0),onSubmit:function(){if(o){var e=h.trim();e.length>11&&"<p><br></p>"===e.slice(-11)&&(e=e.substr(0,e.length-11));var t={sender_id:Date.now().toString()},n=o.userName?o.userName:o.senderUsername,s=(new Date).toISOString().replace("T"," ").replace("Z",Math.floor(1e3*Math.random())+"+00:00"),c={text:e,attachments:w,custom_json:t,sender_username:n,chat:a,created:s};if(e.length>0||w.length>0){r.sendMessage(o,a,c,function(){});var u=q({},l);u[c.created]=c,i(u),d(a,c.text,{createdAt:c.created,attachments:c.attachments,senderId:c.custom_json.sender_id,username:c.sender_username})}g(""),C([])}}.bind(void 0),onAttach:C.bind(void 0),translate:c}))},en={NewMessageFormContainer:{position:"absolute",bottom:"0px",width:"100%",backgroundColor:"white"}},tn=function(e){var o=t.useRef(!1),r=t.useState(!1),a=r[0],l=r[1],s=t.useContext(h),c=s.connecting,d=s.userCallbacks.translate;return t.useEffect(function(){o.current||(o.current=!0,setTimeout(function(){return l(!0)},e.renderDelay?e.renderDelay:0))}),c&&a?n.createElement("div",{style:{zIndex:"1",bottom:"100px",left:"0",right:"0",position:"absolute",textAlign:"center"}},n.createElement("span",{style:{fontSize:"15px",padding:"10px 22px",color:"white",display:"inline-block",backgroundColor:"#fa8c16",borderRadius:"1.3em"},id:"ce-connecting-popup"},n.createElement(i.SyncOutlined,{spin:!0})," ",d("Connecting","ConnectionBar"))):n.createElement("div",null)},nn=function(e){var o=t.useRef(!1),a=t.useState(!1),l=a[0],s=a[1],c=t.useContext(r.ChatEngineContext),d=c.conn,p=c.isBottomVisible,f=c.userCallbacks.translate,m=e.chat;if(t.useEffect(function(){o.current||(o.current=!0,setTimeout(function(){return s(!0)},e.renderDelay?e.renderDelay:0))}),null===d||!m||null===m)return n.createElement("div",null);var h=void 0;return m.people.map(function(e){e.person.username===d.userName&&(h=e.last_read)}),!l||p||void 0===m.last_message.id||m.last_message.id===h?n.createElement("div",null):n.createElement("div",{style:{zIndex:"1",bottom:"100px",left:"0",right:"0",position:"absolute",textAlign:"center"}},n.createElement("div",{style:{fontSize:"15px",padding:"10px 22px",color:"white",display:"inline-block",backgroundColor:"#389e0d",borderRadius:"1.3em",cursor:"pointer"},id:"ce-scroll-down-bar",onClick:function(){return u.animateScroll.scrollToBottom({duration:333,containerId:"ce-feed-container"})}},n.createElement(i.CaretDownOutlined,null)," ",f(d.userName?"Unread Messages":"Scroll to Bottom","ScrollDownBar")))},on=45,rn=function(e){var a=t.useState(!1),l=a[0],i=a[1],s=t.useState(!1),c=s[0],d=s[1],p=t.useState(!1),f=p[0],m=p[1],h=t.useState(null),g=h[0],v=h[1],b=t.useContext(r.ChatEngineContext),x=b.conn,y=b.chats,w=b.setChats,C=b.messages,E=b.setMessages,k=b.activeChat,S=b.setActiveChat,N=b.loadMoreMessages,M=b.setLoadMoreMessages,_=b.isBottomVisible,O=b.typingCounter,T=O&&O[k]?O[k]:[],I=y&&y[g],D=l&&o.isEmpty(C);function z(e){if(y){var t=q({},y);t[e.id]=e,w(t)}}function R(t,n,a){if(i(!0),E(o.mapKeys(n,"created")),n.length>0){var l=n[n.length-1];e.userName&&e.userName!==l.sender_username&&r.readMessage(x,t,l.id,function(e){return z(e)})}a&&u.animateScroll.scrollToBottom({duration:0,containerId:a}),e.onGetMessages&&e.onGetMessages(t,n)}function A(t){t?(on+=33,M(!1),r.getLatestMessages(x,k,on,function(e,t){return R(e,t,!1)})):x&&!e.activeChat&&null!==k&&k!==g?(on=45,v(k),r.getLatestMessages(x,k,on,function(e,t){return R(e,t,"ce-feed-container")})):x&&e.activeChat&&e.activeChat!==g&&(on=45,S(e.activeChat),v(e.activeChat),r.getLatestMessages(x,e.activeChat,on,function(e,t){return R(e,t,"ce-feed-container")}))}function F(e,t){var n=void 0;return t.people.map(function(t){t.person.username===e&&(n=t.last_read)}),n}return t.useEffect(function(){A(!1)},[x,k,g]),t.useEffect(function(){A(N)},[N]),t.useEffect(function(){_&&!o.isEmpty(C)&&(setTimeout(function(){u.animateScroll.scrollToBottom({duration:333,containerId:"ce-feed-container"})},100),F(x.userName,I)&&F(x.userName,I)!==I.last_message.id&&r.readMessage(x,g,I.last_message.id,function(e){return z(e)}))},[C,_]),void 0===x?n.createElement(K,e):x&&null!==y&&0===Object.values(y).filter(function(e){return e}).length?n.createElement(We,{conn:x}):n.createElement("div",{className:"ce-chat-feed",style:{height:"100%",maxHeight:"100vh",backgroundColor:"#f0f0f0"}},e.renderChatHeader?e.renderChatHeader(I,{chatListIsOpen:c,setChatListIsOpen:d,chatSettingsIsOpen:f,setChatSettingsIsOpen:m}):n.createElement(ht,{setChatListIsOpen:d,setChatSettingsIsOpen:m}),n.createElement(qt,{chatListIsOpen:c,setChatListIsOpen:d}),n.createElement(bt,{chatSettingsIsOpen:f,setChatSettingsIsOpen:m}),n.createElement("div",{id:"ce-feed-container",style:an.feedContainer,className:"ce-chat-feed-container"},n.createElement("div",{style:{height:"88px"},className:"ce-feed-container-top"}),Object.keys(C).length>0&&n.createElement(Ke,{onEnter:function(){return M(!0)}}),D&&e.renderIceBreaker&&e.renderIceBreaker(I),D&&!e.renderIceBreaker&&n.createElement(Ve,null),n.createElement(Ft,e),e.renderIsTyping?e.renderIsTyping(T):n.createElement(jt,null),e.renderConnectionBar?e.renderConnectionBar(I):n.createElement(tn,{renderDelay:1e4}),e.renderScrollDownBar?e.renderScrollDownBar(I):n.createElement(nn,{chat:I,renderDelay:3e3}),n.createElement("div",{style:{height:"86px"},className:"ce-feed-container-bottom"})),e.renderNewMessageForm?e.renderNewMessageForm(e,g):n.createElement(Qt,null))},an={feedContainer:{width:"100%",height:"100%",maxHeight:"100vh",overflowX:"hidden",overflowY:"scroll",backgroundColor:"white"}};c.setConfiguration({maxScreenClass:"xs",gutterWidth:0});var ln=function(e){var a=t.useContext(h),l=e.height,i=q({},e,a),s=Object.keys(e).filter(function(e){return e.match(/^on[A-Z][a-z]/)&&"onMessageSent"!==e}).reduce(function(t,n){return t[n]=e[n],t},{});return n.createElement("div",q({},s,{className:"ce-chat-engine",style:{textAlign:"left",backgroundColor:"white"}}),n.createElement(N,e),n.createElement(c.Row,{className:"ce-wrapper"},n.createElement(c.Col,{xs:0,sm:3,style:{height:l||""},className:"ce-chat-list-column"},e.renderChatList?e.renderChatList(i):n.createElement(W,q({},i,{onChatClick:function(t){e.renderChatFeed&&r.getLatestMessages(e,t,45,function(e,t){a.setMessages(q({},o.mapKeys(t,"created")))})}}))),n.createElement(c.Col,{xs:12,sm:6,style:{height:l||""},className:"ce-chat-feed-column"},e.renderChatFeed?e.renderChatFeed(i):n.createElement(rn,i)),n.createElement(c.Col,{xs:0,sm:3,style:{height:l||""},className:"ce-settings-column"},e.renderChatSettings?e.renderChatSettings(e):n.createElement(dt,e))))},sn=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={avatar:""},t}v(t,e);var o=t.prototype;return o.updateImg=function(){var e=this.props.avatar;(e=e&&null!==e?e:"").split("?")[0]!==this.state.avatar.split("?")[0]&&this.setState({avatar:e})},o.componentDidMount=function(){this.updateImg()},o.componentDidUpdate=function(){this.updateImg()},o.render=function(){var e=this.props,t=e.username,o=e.is_online,r=this.props.style?this.props.style:{},a=t?t.substring(0,2).toUpperCase():"",l=Mt(t);return n.createElement("div",{style:{width:"48px",height:"48px"}},n.createElement("div",{style:{height:"0px"}},n.createElement("div",{className:"ce-avatar",style:q({},cn.avatar,r,{backgroundColor:this.state.avatar?"white":l,backgroundImage:this.state.avatar&&"url("+this.state.avatar+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"48px"})},n.createElement("div",{className:"ce-avatar-text",style:cn.avatarText},!this.state.avatar&&a))),!1!==this.props.show_online&&n.createElement("div",{className:"ce-avatar-status",style:q({},cn.status,{backgroundColor:o?"#52c41a":"#f5222d"})}))},t}(t.Component),cn={avatar:{width:"44px",height:"44px",borderRadius:"22px",color:"white",textAlign:"center"},avatarText:{color:"white",paddingTop:"12px",fontSize:"15px",fontWeight:"600"},status:{width:"8px",height:"8px",borderRadius:"100%",border:"2px solid white"}};sn.propTypes={avatar:Ae.string,username:Ae.string,style:Ae.object,is_online:Ae.bool,show_online:Ae.bool};var dn=function(e){var o,r=t.useState({hovered:!1}),a=r[0],l=r[1];return n.createElement("div",((o={className:"uploader",encType:"multipart/form-data",style:{height:"0px"}}).className="ce-upload-document-form",o),n.createElement("label",{htmlFor:"files",id:"ce-upload-document-button"},n.createElement(i.PaperClipOutlined,{id:"ce-upload-document-icon",onMouseEnter:function(){return l(q({},a,{hovered:!0}))},onMouseLeave:function(){return l(q({},a,{hovered:!1}))},style:q({},{cursor:"pointer",position:"absolute",bottom:"20px",right:"63px",fontSize:"18px"},{color:a.hovered?"#69c0ff":"#1890ff"})})),n.createElement("input",{id:"files",accept:"image/x-png,image/gif,image/jpeg",style:{visibility:"hidden"},type:"file",onChange:function(t){return n=Array.from(t.target.files),void(e.onSelectFiles&&e.onSelectFiles(n));var n},onClick:function(e){return e.target.value=null}}))},un=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={value:null,height:0},t}v(t,e);var o=t.prototype;return o.resize=function(){var e=document.getElementById("msg-textarea");e.style.height="",e.style.height=Math.min(e.scrollHeight,150)+"px",this.setState({height:Math.min(e.scrollHeight,150)})},o.componentDidMount=function(){this.resize()},o.handleChange=function(e){this.resize(),this.props.handleChange&&this.props.handleChange(e)},o.onKeyDown=function(e){"Enter"===e.key&&(e.preventDefault(),this.props.value.length>0&&this.props.onSubmit&&this.props.onSubmit(e))},o.render=function(){var e=this;return n.createElement("input",{id:"msg-textarea",className:"ce-input ce-textarea-input",style:pn.input,value:this.props.value,placeholder:this.props.label,onChange:function(t){return e.handleChange(t)},onKeyDown:function(t){return e.onKeyDown(t)}})},t}(t.Component),pn={input:{border:"1px solid white",width:"calc(100% - 100px)",outline:"none",fontSize:"15px",paddingLeft:"12px",paddingRight:"12px",position:"relative",left:"12px",resize:"none",overflowX:"hidden"}},fn={messageFormContainer:{position:"absolute",bottom:"0px",width:"100%",backgroundColor:"white"},messageForm:{paddingTop:"22px",marginRight:"10px",width:"100%"},inputContainer:{minHeight:"36px",paddingBottom:"16px",width:"100%"},sendMessage:{width:"40px",height:"40px",borderRadius:"50%",borderWidth:"0px",padding:"0px",outline:"none",color:"white",backgroundColor:"rgb(24, 144, 255)",cursor:"pointer",position:"absolute",bottom:"12px",right:"10px",zIndex:"10"},sendIcon:{width:"20px",transform:"rotate(-20deg)",marginLeft:"5px"}};exports.AutoCompleteInput=Le,exports.Avatar=sn,exports.Button=He,exports.ChatCard=H,exports.ChatEngine=function(e){return t.useContext(h)?n.createElement(ln,e):n.createElement(g,e,n.createElement(ln,e))},exports.ChatEngineContext=h,exports.ChatEngineWrapper=g,exports.ChatFeed=rn,exports.ChatHeader=ht,exports.ChatList=W,exports.ChatSettings=dt,exports.ChatSettingsTop=ct,exports.ChatSocket=function(e){var o=t.useState(!1),r=o[1];return n.createElement("div",null,!o[0]&&n.createElement(D,q({},e,{reRender:function(){return r(!0),void setTimeout(function(){return r(!1)},100)}})))},exports.ConnectionBar=tn,exports.Dot=_t,exports.IceBreaker=Ve,exports.IsTyping=jt,exports.MessageBubble=At,exports.MessageFormSocial=function(){var e=t.useContext(r.ChatEngineContext),o=e.conn,a=e.activeChat,l=e.messages,i=e.setMessages,s=e.userCallbacks.translate,c=t.useState(0),d=c[0],u=c[1],p=t.useState(""),f=p[0],m=p[1],h=t.useState(0),g=h[0],v=h[1],b=t.useState([]),x=b[0],y=b[1];if(!o||null===o)return n.createElement("div",null);function w(e){var t=x;t.splice(e,1),y(t),u(d+1)}function C(e){if(e.preventDefault(),o){var t=f.trim();t.length>11&&"<p><br></p>"===t.slice(-11)&&(t=t.substr(0,t.length-11));var n={sender_id:Date.now().toString()},s=o.userName?o.userName:o.senderUsername,c=(new Date).toISOString().replace("T"," ").replace("Z",Math.floor(1e3*Math.random())+"+00:00"),d={text:t,attachments:x,custom_json:n,sender_username:s,chat:a,created:c};(t.length>0||x.length>0)&&r.sendMessage(o,a,d,function(){}),m(""),y([]);var u=q({},l);u[d.created]=d,i(u)}}return n.createElement("div",{id:"ce-social-msg-form-container",style:fn.messageFormContainer,className:"ce-social-message-form-container"},n.createElement(Kt,{files:x,onRemove:function(e){return w(e)}}),n.createElement($t,{files:x,onRemove:function(e){return w(e)}}),n.createElement("form",{onSubmit:C.bind(void 0),className:"ce-social-message-form",style:fn.messageForm},n.createElement("button",{icon:"send",type:"submit",id:"ce-send-message-button",style:fn.sendMessage},n.createElement("img",{className:"send-icon",style:fn.sendIcon,src:"https://chat-engine-assets.s3.amazonaws.com/send.png",alt:"chat-engine-send-button"})),n.createElement("div",{style:fn.inputContainer,className:"ce-message-input-form"},n.createElement(dn,{onSelectFiles:function(e){return y(e)}}),n.createElement(un,{value:f,label:s("Send a message...","MessageFormSocial"),handleChange:function(e){m(e.target.value),v((g+1)%4),1===g&&o&&r.isTyping(o,a)}.bind(void 0),onSubmit:C.bind(void 0)}))))},exports.NewChatForm=R,exports.NewMessageForm=Qt,exports.OptionsSettings=lt,exports.PeopleSettings=Qe,exports.PhotosSettings=at,exports.ScrollDownBar=nn,exports.Socket=N,exports.TextInput=Fe,exports.addPerson=function(e,t,n,o){a.post(b(e)+"/chats/"+t+"/people/",{username:n},{headers:x(e)}).then(function(e){o&&o(e.data)}).catch(function(e){console.log("New Person Error",e)})},exports.deleteChat=function(e,t,n){a.delete(b(e)+"/chats/"+t+"/",{headers:x(e)}).then(function(e){n&&n(e.data)}).catch(function(e){console.log("Delete Chat Error",e)})},exports.deleteMessage=function(e,t,n,o){a.delete(b(e)+"/chats/"+t+"/messages/"+n+"/",{headers:x(e)}).then(function(e){o&&o(e.data)}).catch(function(e){console.log("Delete Messages Error",e)})},exports.editChat=function(e,t,n,o){a.patch(b(e)+"/chats/"+t+"/",n,{headers:x(e)}).then(function(e){o&&o(e.data)}).catch(function(e){console.log("Edit Chat Error",e)})},exports.editMessage=function(e,t,n,o,r){a.patch(b(e)+"/chats/"+t+"/messages/"+n+"/",o,{headers:x(e)}).then(function(e){r&&r(e.data)}).catch(function(e){console.log("Delete Messages Error",e)})},exports.editMyData=function(e,t,n){a.patch(b(e)+"/chats/me/",t,{headers:x(e)}).then(function(e){n&&n(e.data)}).catch(function(e){console.log("Edit Myself Error",e)})},exports.getChat=function(e,t,n){a.get(b(e)+"/chats/"+t+"/",{headers:x(e)}).then(function(e){n&&n(e.data)}).catch(function(e){console.log("Get Chat Error",e)})},exports.getChats=function(e,t){a.get(b(e)+"/chats/",{headers:x(e)}).then(function(n){e.onGetChats&&e.onGetChats(n.data),t&&t(n.data)}).catch(function(e){console.log("Fetch Chats Error",e)})},exports.getChatsBefore=function(e,t,n,o){a.put(b(e)+"/chats/latest/"+n+"/",{before:t},{headers:x(e)}).then(function(t){e.onGetChats&&e.onGetChats(t.data),o&&o(t.data)}).catch(function(e){console.log("Fetch Chats Before Error",e)})},exports.getLatestChats=function(e,t,n){a.get(b(e)+"/chats/latest/"+t+"/",{headers:x(e)}).then(function(t){e.onGetChats&&e.onGetChats(t.data),n&&n(t.data)}).catch(function(e){console.log("Fetch Chats Error",e)})},exports.getLatestMessages=function(e,t,n,o){x(e)&&a.get(b(e)+"/chats/"+t+"/messages/latest/"+n+"/",{headers:x(e)}).then(function(n){e.onGetMessages&&e.onGetMessages(t,n.data),o&&o(t,n.data)}).catch(function(e){console.log("Fetch Latest Messages Error",e)})},exports.getMessage=function(e,t,n,o){a.get(b(e)+"/chats/"+t+"/messages/"+n+"/",{headers:x(e)}).then(function(e){o&&o(t,e.data)}).catch(function(e){console.log("Fetch Message Error",e)})},exports.getMessages=function(e,t,n){a.get(b(e)+"/chats/"+t+"/messages/",{headers:x(e)}).then(function(o){e.onGetMessages&&e.onGetMessages(t,o.data),n&&n(t,o.data)}).catch(function(e){console.log("Fetch Messages Error",e)})},exports.getMyData=function(e,t){a.get(b(e)+"/users/me/",{headers:x(e)}).then(function(e){t&&t(e.data)}).catch(function(e){console.log("Get Myself Error",e)})},exports.getOrCreateChat=function(e,t,n){a.put(b(e)+"/chats/",t,{headers:x(e)}).then(function(e){n&&n(e.data)}).catch(function(e){console.log("Get or Create Chat Error",e)})},exports.getOtherPeople=function(e,t,n,o){a.get(b(e)+"/chats/"+t+"/others/",{headers:x(e)}).then(function(o){e.onGetOtherPeople&&e.onGetOtherPeople(t,o.data),n&&n(t,o.data)}).catch(function(e){console.log("Fetch Other People Error",e),o&&o()})},exports.isTyping=function(e,t,n){a.post(b(e)+"/chats/"+t+"/typing/",{},{headers:x(e)}).then(function(e){n&&n(e.data)}).catch(function(e){})},exports.leaveChat=function(e,t,n){a.delete(b(e)+"/chats/"+t+"/people/",{headers:x(e)}).then(function(e){n&&n(e.data)}).catch(function(e){console.log("Delete Person Error",e)})},exports.newChat=U,exports.readMessage=function(e,t,n,o){a.patch(b(e)+"/chats/"+t+"/people/",{last_read:n},{headers:x(e)}).then(function(e){o&&o(e.data)}).catch(function(e){console.log("Read Message Error",e)})},exports.removePerson=function(e,t,n,o){a.put(b(e)+"/chats/"+t+"/people/",{username:n},{headers:x(e)}).then(function(e){o&&o(e.data)}).catch(function(e){console.log("Delete Person Error",e)})},exports.sendMessage=function(e,t,n,o){var r=new FormData;if(n.attachments)for(var l=0;l<n.attachments.length;l++)r.append("attachments",n.attachments[l],n.attachments[l].name);else if(n.files)for(var i=0;i<n.files.length;i++)r.append("attachments",n.files[i],n.files[i].name);n.created&&r.append("created",n.created),r.append("text",n.text),r.append("sender_username",n.sender_username),r.append("custom_json",JSON.stringify(n.custom_json?n.custom_json:{})),a.post(b(e)+"/chats/"+t+"/messages/",r,{headers:x(e)}).then(function(e){o&&o(e.data)}).catch(function(e){console.log("Send Messages Error",e)})};
//# sourceMappingURL=index.js.map
